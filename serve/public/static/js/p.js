(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["p"],{"0b7c":function(e,t,a){},"0f53":function(e,t,a){},"0f5d":function(e,t,a){},"129f":function(e,t,a){"use strict";e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}},"14f8":function(e,t,a){"use strict";a.r(t);a("4de4"),a("d81d"),a("b0c0"),a("e9f5"),a("ab43"),a("d3b7");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sys area"},[t("el-form",{ref:"form",staticClass:"formAdapt",attrs:{model:e.form,rules:e.rules,"label-width":"90px"}},[t("el-tabs",{attrs:{"tab-position":"left",width:"200px"}},[t("el-tab-pane",{attrs:{label:"基础信息"}},[t("el-form-item",{attrs:{label:"系统名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入系统名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"公司名称",prop:"company"}},[t("el-input",{attrs:{placeholder:"请输入公司名称"},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}})],1),t("el-form-item",{attrs:{label:"备案信息"}},[t("el-input",{attrs:{placeholder:"请输入备案信息"},model:{value:e.form.icp,callback:function(t){e.$set(e.form,"icp",t)},expression:"form.icp"}})],1),t("el-form-item",{attrs:{label:"公告信息"}},[t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"公告信息"},model:{value:e.form.notice,callback:function(t){e.$set(e.form,"notice",t)},expression:"form.notice"}})],1)],1),t("el-tab-pane",{attrs:{label:"功能参数"}},[t("table",{staticClass:"funTable"},[t("colgroup",[t("col",{attrs:{width:"160"}}),t("col",{attrs:{width:"120"}}),t("col")]),t("tr",[t("th",[e._v("功能名称")]),t("th",[e._v("功能配置")]),t("th",[e._v("功能说明")])]),t("tr",[t("td",[e._v("自动审核")]),t("td",[t("el-switch",{model:{value:e.form.fun.examine,callback:function(t){e.$set(e.form.fun,"examine",t)},expression:"form.fun.examine"}})],1),t("td",[e._v("启用后单据模块将自动审核")])]),t("tr",[t("td",[e._v("启用税金")]),t("td",[t("el-switch",{on:{change:e.taxChange},model:{value:e.form.fun.tax,callback:function(t){e.$set(e.form.fun,"tax",t)},expression:"form.fun.tax"}})],1),t("td",[t("span",[e._v("增值税税率")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fun.rate,expression:"form.fun.rate"}],staticClass:"funTabRate",attrs:{type:"text",disabled:!e.form.fun.tax},domProps:{value:e.form.fun.rate},on:{input:function(t){t.target.composing||e.$set(e.form.fun,"rate",t.target.value)}}}),t("span",[e._v("%")])])]),t("tr",[t("td",[e._v("允许负库存")]),t("td",[t("el-switch",{model:{value:e.form.fun.overflow,callback:function(t){e.$set(e.form.fun,"overflow",t)},expression:"form.fun.overflow"}})],1),t("td",[e._v("启用后商品库存将允许为负数")])]),t("tr",[t("td",[e._v("计价方法")]),t("td",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.fun.valuation,expression:"form.fun.valuation"}],staticClass:"fluid",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form.fun,"valuation",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"base"}},[e._v("基础计价")]),t("option",{attrs:{value:"ma"}},[e._v("移动平均")]),t("option",{attrs:{value:"fifo"}},[e._v("先进先出")])])]),t("td",[e._v("根据实际情况选择相应计价方法")])]),t("tr",[t("td",[e._v("核算类型")]),t("td",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.fun.branch,expression:"form.fun.branch"}],staticClass:"fluid",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form.fun,"branch",t.target.multiple?a:a[0])}}},[t("option",{domProps:{value:0}},[e._v("总仓核算")]),t("option",{domProps:{value:1}},[e._v("分仓核算")])])]),t("td",[e._v("根据实际情况选择相应核算类型")])]),t("tr",[t("td",[e._v("成本规则")]),t("td",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.fun.rule,expression:"form.fun.rule"}],staticClass:"fluid",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form.fun,"rule",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"def"}},[e._v("结存结余")]),t("option",{attrs:{value:"attr"}},[e._v("辅助属性")]),t("option",{attrs:{value:"batch"}},[e._v("批次日期")]),t("option",{attrs:{value:"aab"}},[e._v("属性批次")])])]),t("td",[e._v("根据实际情况选择相应成本规则")])]),t("tr",[t("td",[e._v("数量位数")]),t("td",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.fun.digit.nums,expression:"form.fun.digit.nums"}],staticClass:"fluid",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form.fun.digit,"nums",t.target.multiple?a:a[0])}}},[t("option",{domProps:{value:0}},[e._v("0位小数")]),t("option",{domProps:{value:1}},[e._v("1位小数")]),t("option",{domProps:{value:2}},[e._v("2位小数")]),t("option",{domProps:{value:3}},[e._v("3位小数")]),t("option",{domProps:{value:4}},[e._v("4位小数")])])]),t("td",[e._v("全局数量小数位数范围")])]),t("tr",[t("td",[e._v("金额位数")]),t("td",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.fun.digit.money,expression:"form.fun.digit.money"}],staticClass:"fluid",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form.fun.digit,"money",t.target.multiple?a:a[0])}}},[t("option",{domProps:{value:2}},[e._v("2位小数")]),t("option",{domProps:{value:3}},[e._v("3位小数")]),t("option",{domProps:{value:4}},[e._v("4位小数")])])]),t("td",[e._v("全局金额小数位数范围")])]),t("tr",[t("td",[e._v("报表天数")]),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fun.days,expression:"form.fun.days"}],staticClass:"fluid",domProps:{value:e.form.fun.days},on:{input:function(t){t.target.composing||e.$set(e.form.fun,"days",t.target.value)}}})]),t("td",[e._v("全局报表统计天数范围")])])])]),t("el-tab-pane",{attrs:{label:"物流配置"}},[t("el-table",{staticClass:"gridTable",staticStyle:{width:"561px"},attrs:{data:e.form.logistics,size:"mini",border:""}},[t("el-table-column",{attrs:{label:"物流标识",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.row.key,expression:"scope.row.key"}],attrs:{type:"text",placeholder:"物流标识"},domProps:{value:a.row.key},on:{input:function(t){t.target.composing||e.$set(a.row,"key",t.target.value)}}})]}}])}),t("el-table-column",{attrs:{label:"物流名称",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.row.name,expression:"scope.row.name"}],attrs:{type:"text",placeholder:"物流名称"},domProps:{value:a.row.name},on:{input:function(t){t.target.composing||e.$set(a.row,"name",t.target.value)}}})]}}])}),t("el-table-column",{attrs:{label:"启用状态",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{disabled:"auto"==a.row.key},model:{value:a.row.enable,callback:function(t){e.$set(a.row,"enable",t)},expression:"scope.row.enable"}})]}}])}),t("el-table-column",{attrs:{align:"center",width:"120px"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("span",[e._v("相关操作")]),e._v(" "),t("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addLogistics}})]}},{key:"default",fn:function(a){return["auto"!=a.row.key?t("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.delLogistics(a.$index)}}}):e._e()]}}])})],1)],1),t("el-tab-pane",{attrs:{label:"商品品牌"}},[t("el-form-item",{attrs:{label:"商品品牌"}},[t("el-input",{attrs:{placeholder:"请输入品牌名称",clearable:""},model:{value:e.text.brand,callback:function(t){e.$set(e.text,"brand",t)},expression:"text.brand"}},[t("template",{slot:"append"},[t("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addBrand}})])],2),e.form.brand.length>0?t("ul",{staticClass:"list"},e._l(e.form.brand,(function(a,r){return t("li",{key:r},[e._v(e._s(a)),t("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.delBrand(r)}}})])})),0):e._e()],1)],1),t("el-tab-pane",{attrs:{label:"计量单位"}},[t("el-form-item",{attrs:{label:"计量单位"}},[t("el-input",{attrs:{placeholder:"请输入计量单位名称",clearable:""},model:{value:e.text.unit,callback:function(t){e.$set(e.text,"unit",t)},expression:"text.unit"}},[t("template",{slot:"append"},[t("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addUnit}})])],2),e.form.unit.length>0?t("ul",{staticClass:"list"},e._l(e.form.unit,(function(a,r){return t("li",{key:r},[e._v(e._s(a)),t("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.delUnit(r)}}})])})),0):e._e()],1)],1),t("el-tab-pane",{attrs:{label:"客户类别"}},[t("el-form-item",{attrs:{label:"客户类别"}},[t("el-input",{attrs:{placeholder:"请输入客户类别名称",clearable:""},model:{value:e.text.crCategory,callback:function(t){e.$set(e.text,"crCategory",t)},expression:"text.crCategory"}},[t("template",{slot:"append"},[t("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addCrCategory}})])],2),e.form.crCategory.length>0?t("ul",{staticClass:"list"},e._l(e.form.crCategory,(function(a,r){return t("li",{key:r},[e._v(e._s(a)),"常规类别"!=a?t("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.delCrCategory(r)}}}):e._e()])})),0):e._e()],1)],1),t("el-tab-pane",{attrs:{label:"客户等级"}},[t("el-form-item",{attrs:{label:"客户等级"}},[t("el-input",{attrs:{placeholder:"请输入客户等级名称",clearable:""},model:{value:e.text.crGrade,callback:function(t){e.$set(e.text,"crGrade",t)},expression:"text.crGrade"}},[t("template",{slot:"append"},[t("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addCrGrade}})])],2),e.form.crGrade.length>0?t("ul",{staticClass:"list"},e._l(e.form.crGrade,(function(a,r){return t("li",{key:r},[e._v(e._s(a)),"常规等级"!=a?t("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.delCrGrade(r)}}}):e._e()])})),0):e._e()],1)],1),t("el-tab-pane",{attrs:{label:"供应商类别"}},[t("el-form-item",{attrs:{label:"供应商类别"}},[t("el-input",{attrs:{placeholder:"请输入供应商类别名称",clearable:""},model:{value:e.text.srCategory,callback:function(t){e.$set(e.text,"srCategory",t)},expression:"text.srCategory"}},[t("template",{slot:"append"},[t("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addSrCategory}})])],2),e.form.srCategory.length>0?t("ul",{staticClass:"list"},e._l(e.form.srCategory,(function(a,r){return t("li",{key:r},[e._v(e._s(a)),"常规类别"!=a?t("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.delSrCategory(r)}}}):e._e()])})),0):e._e()],1)],1)],1)],1),e.$lib.getUserRoot(e.store.root,"senior","edit")?[t("div",{staticClass:"layerBtn"},[t("el-button",{attrs:{type:"info"},on:{click:e.save}},[e._v("保存设置")])],1)]:e._e()],2)},s=[],o=a("b85c"),n=(a("d9e2"),a("14d9"),a("a434"),{name:"Sys",data:function(){var e=this;return{text:{payment:{name:"",key:""},brand:"",unit:"",crCategory:"",crGrade:"",srCategory:""},form:{name:"",icp:"",notice:"",company:"",fun:{examine:!0,tax:!1,rate:"0",overflow:!1,valuation:"base",branch:0,rule:"def",digit:{nums:0,money:2},days:30},logistics:[{key:"auto",name:"自动识别",enable:!0}],serial:!1,batch:!1,brand:[],unit:[],crCategory:[],crGrade:[],srCategory:[]},rules:{name:{required:!0,message:"请输入系统名称",trigger:"blur"},company:{required:!0,message:"请输入公司名称",trigger:"blur"},"vend.ratio":[{required:!0,message:"请输入积分比例",trigger:"blur"},{validator:function(t,a,r){e.$lib.validate("integer",a)?r():r(new Error("积分比例不正确"))},trigger:"blur"}],"vend.barter":[{required:!0,message:"请输入兑换比例",trigger:"blur"},{validator:function(t,a,r){e.$lib.validate("integer",a)?r():r(new Error("兑换比例不正确"))},trigger:"blur"}]}}},created:function(){this.record()},computed:{store:function(){return this.$store.state}},methods:{record:function(){var e=this;this.$axios.post("sys/record").then((function(t){"success"==t.state?e.form=t.info:"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},save:function(){var e=this;this.$refs["form"].validate((function(t){if(t){if(!e.$lib.validate("percentage",e.form.fun.rate))return e.$message({type:"warning",message:"增值税税率不正确!"}),!1;if(!e.$lib.validate("integer",e.form.fun.days))return e.$message({type:"warning",message:"报表天数不正确!"}),!1;var a,r=Object(o["a"])(e.form.logistics);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(e.$lib.validate("empty",s.key)||e.$lib.validate("empty",s.name))return e.$message({type:"warning",message:"物流配置不正确!"}),!1}}catch(n){r.e(n)}finally{r.f()}e.$axios.post("sys/save",e.form).then((function(t){"success"==t.state?(e.$lib.updateStore(e),e.$message({type:"success",message:"系统参数保存成功!"})):"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))}else e.$message({type:"warning",message:"表单验证错误,请检查并修正!"})}))},taxChange:function(e){e||(this.form.fun.rate=0)},addLogistics:function(){this.form.logistics.push({key:"",name:"",enable:!1})},delLogistics:function(e){this.form.logistics.splice(e,1)},addBrand:function(){this.$lib.validate("empty",this.text.brand)?this.$message({type:"warning",message:"商品品牌名称不可为空!"}):(this.form.brand.push(this.text.brand),this.text.brand="")},delBrand:function(e){this.form.brand.splice(e,1)},addUnit:function(){this.$lib.validate("empty",this.text.unit)?this.$message({type:"warning",message:"计量单位名称不可为空!"}):"多单位"==this.text.unit||"-1"==this.text.unit?this.$message({type:"warning",message:"计量单位[ 多单位 ]为保留文本!"}):(this.form.unit.push(this.text.unit),this.text.unit="")},delUnit:function(e){this.form.unit.splice(e,1)},addCrCategory:function(){this.$lib.validate("empty",this.text.crCategory)?this.$message({type:"warning",message:"客户类别名称不可为空!"}):"常规类别"==this.text.crCategory?this.$message({type:"warning",message:"客户类别[ 常规类别 ]为保留文本!"}):(this.form.crCategory.push(this.text.crCategory),this.text.crCategory="")},delCrCategory:function(e){this.form.crCategory.splice(e,1)},addCrGrade:function(){this.$lib.validate("empty",this.text.crGrade)?this.$message({type:"warning",message:"客户等级名称不可为空!"}):"常规等级"==this.text.crGrade?this.$message({type:"warning",message:"客户等级[ 常规等级 ]为保留文本!"}):(this.form.crGrade.push(this.text.crGrade),this.text.crGrade="")},delCrGrade:function(e){this.form.crGrade.splice(e,1)},addSrCategory:function(){this.$lib.validate("empty",this.text.srCategory)?this.$message({type:"warning",message:"供应商类别名称不可为空!"}):"常规类别"==this.text.srCategory?this.$message({type:"warning",message:"供应商类别[ 常规类别 ]为保留文本!"}):(this.form.srCategory.push(this.text.srCategory),this.text.srCategory="")},delSrCategory:function(e){this.form.srCategory.splice(e,1)}}}),i=n,l=(a("7be3"),a("e516"),a("2877")),c=Object(l["a"])(i,r,s,!1,null,"1e2bdcb9",null);t["default"]=c.exports},"21fd":function(e,t,a){},"23f7":function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("el-popover",{ref:"nodTree",staticClass:"nodTree"},[t("el-input",{attrs:{slot:"reference",placeholder:e.placeholder,readonly:""},nativeOn:{keydown:function(t){return e.inputEvent.apply(null,arguments)}},slot:"reference",model:{value:e.label,callback:function(t){e.label=t},expression:"label"}},[t("template",{slot:"suffix"},[t("i",{class:["el-input__icon",""!=e.label?"el-icon-circle-close":"el-icon-arrow-down"],on:{click:function(t){return t.stopPropagation(),e.delModel.apply(null,arguments)}}})])],2),t("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.treeProps,"node-key":e.treeKey,"current-node-key":e.checked,"show-checkbox":e.checkbox,"check-strictly":e.checkStrictly,"default-checked-keys":e.checkeds,"default-expanded-keys":e.expanded,"highlight-current":!0},on:{check:e.setTree,"node-click":e.setTree}})],1)},s=[],o=a("b85c"),n=(a("7db0"),a("a15b"),a("14d9"),a("b0c0"),a("e9f5"),a("f665"),a("d3b7"),{name:"NodTree",props:{value:{required:!0},treeData:{required:!0,type:Array},treeKey:{default:"id"},treeProps:{default:function(){return{label:"name",children:"sub"}}},placeholder:{default:"请点击选择数据"},checkStrictly:{default:!1}},data:function(){return{label:"",checked:null,checkeds:[],expanded:[],checkbox:!1}},created:function(){this.init()},computed:{flatTree:function(){var e=this.$lib.flatten(this.treeData);return e}},watch:{value:{handler:function(e){this.checkbox?this.$lib.comparison(e,this.checkeds)&&(this.checkeds=e,this.$refs.tree.setCheckedKeys(e,!0)):e!=this.checked&&(this.checked=e,this.$refs.tree.setCurrentKey(e))},deep:!0},checked:function(){this.setInput()},checkeds:{handler:function(){this.setInput()},deep:!0}},methods:{init:function(){var e=this;if(null!=this.value){Array.isArray(this.value)?(this.checkbox=!0,this.checkeds=this.value):(this.checkbox=!1,this.checked=this.value);var t,a=Object(o["a"])(this.checkbox?this.checkeds:[this.checked]);try{var r=function(){var a=t.value,r=e.flatTree.find((function(e){return e.id==a}));void 0!=r&&r.hasOwnProperty("pid")&&e.expanded.push(r.pid)};for(a.s();!(t=a.n()).done;)r()}catch(s){a.e(s)}finally{a.f()}}},setInput:function(){var e,t=this,a=[],r=Object(o["a"])(this.checkbox?this.checkeds:[this.checked]);try{var s=function(){var r=e.value,s=t.flatTree.find((function(e){return e.id==r}));void 0==s||a.push(s.name)};for(r.s();!(e=r.n()).done;)s()}catch(n){r.e(n)}finally{r.f()}this.label=a.join(",")},setTree:function(e){this.checkbox?(this.checkeds=this.$refs.tree.getCheckedKeys(),this.$emit("input",this.checkeds)):(this.checked=e.id,this.$emit("input",this.checked),this.$refs["nodTree"].showPopper=!1)},delModel:function(){this.label="",this.checkbox?(this.checkeds=[],this.$refs.tree.setCheckedKeys([])):(this.checked=null,this.$refs.tree.setCurrentKey(null)),this.$emit("input",this.checkbox?[]:null),this.$refs["nodTree"].showPopper=!1},inputEvent:function(e){this.$refs["nodTree"].showPopper&&27==e.keyCode&&e.stopPropagation()}}}),i=n,l=(a("d683"),a("2877")),c=Object(l["a"])(i,r,s,!1,null,"9f20837e",null);t["a"]=c.exports},"25db":function(e,t,a){},"26f7":function(e,t,a){"use strict";a("0f53")},5549:function(e,t,a){"use strict";a("b0c0");var r=function(){var e=this,t=e._self._c;return t("el-dropdown",{staticClass:"nodUpload",attrs:{"split-button":"",placement:"bottom-start"}},[t("el-upload",{attrs:{action:e.action,headers:{Token:e.$store.state.token},"show-file-list":!1,"on-success":e.uploadSuccess}},[t("i",{staticClass:"text el-icon-upload"},[e._v(" 点击上传")])]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.files.length>0?[e._l(e.files,(function(a,r){return[t("li",[t("el-row",[t("el-col",{attrs:{span:22}},[t("p",{staticClass:"file",on:{click:function(t){return e.preview(a)}}},[e._v(e._s(a.name))])]),t("el-col",{attrs:{span:2}},[t("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.remove(r)}}})])],1)],1)]}))]:[t("li",{staticClass:"empty"},[e._v("暂无文件信息")])]],2)],1)},s=[],o=(a("99af"),a("14d9"),a("a434"),{name:"NodUpload",props:{value:{required:!0,type:Array},action:{required:!0}},data:function(){return{files:[]}},created:function(){this.files=[].concat(this.value)},watch:{value:{handler:function(e){this.$lib.comparison(e,this.files)||(this.files=[].concat(e))},deep:!0}},methods:{uploadSuccess:function(e,t){"success"==e.state?(this.files.push({name:t.name,url:e.info}),this.incident(),this.$message({type:"success",message:"[ "+t.name+" ] 上传成功!"})):"error"==e.state?this.$message({type:"warning",message:"[ "+t.name+" ]"+e.info}):this.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})},remove:function(e){this.files.splice(e,1),this.incident()},incident:function(){this.$emit("input",this.files),this.$emit("change",this.files)},preview:function(e){this.$message({type:"success",message:"[ "+e.name+" ] 下载请求中..."}),setTimeout((function(){window.open(e.url)}),1e3)}}}),n=o,i=(a("fbb4"),a("2877")),l=Object(i["a"])(n,r,s,!1,null,"7b62d576",null);t["a"]=l.exports},"5b6a":function(e,t,a){"use strict";a("71a1")},"5e2c":function(e,t,a){"use strict";a.r(t);a("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user area"},[t("div",{staticClass:"layout"},[t("el-popover",{ref:"searchPopover",attrs:{"popper-class":"searchPopover",placement:"bottom-start"}},[t("el-form",{ref:"searchFrom",staticClass:"searchFrom",attrs:{inline:""}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入用户名称",clearable:""},model:{value:e.searchFrom.name,callback:function(t){e.$set(e.searchFrom,"name",t)},expression:"searchFrom.name"}})],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入用户账号",clearable:""},model:{value:e.searchFrom.user,callback:function(t){e.$set(e.searchFrom,"user",t)},expression:"searchFrom.user"}})],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入手机号码",clearable:""},model:{value:e.searchFrom.tel,callback:function(t){e.$set(e.searchFrom,"tel",t)},expression:"searchFrom.tel"}})],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入备注信息",clearable:""},model:{value:e.searchFrom.data,callback:function(t){e.$set(e.searchFrom,"data",t)},expression:"searchFrom.data"}})],1),t("el-divider"),t("el-button",{staticClass:"searchBtn",attrs:{icon:"el-icon-search"},on:{click:function(t){return e.record(1)}}})],1),t("el-button",{attrs:{slot:"reference",icon:"el-icon-more"},slot:"reference"})],1),t("el-button-group",[e.$lib.getUserRoot(e.store.root,"senior","add")?[t("el-button",{on:{click:function(t){return e.set(0)}}},[e._v("新增")])]:e._e(),t("el-button",{on:{click:e.reload}},[e._v("刷新")])],2)],1),t("el-divider"),t("el-table",{directives:[{name:"madeTable",rawName:"v-madeTable"}],attrs:{data:e.tableData,height:"calc(100% - 90px)",border:""}},[t("el-table-column",{attrs:{prop:"name",label:"用户名称",align:"center",width:"160px"}}),t("el-table-column",{attrs:{prop:"frameData.name",label:"所属架构",align:"center",width:"120px"}}),t("el-table-column",{attrs:{prop:"roleData.name",label:"用户角色",align:"center",width:"120px"}}),t("el-table-column",{attrs:{prop:"user",label:"用户账号",align:"center",width:"120px"}}),t("el-table-column",{attrs:{prop:"tel",label:"手机号码",align:"center",width:"160px"}}),t("el-table-column",{attrs:{prop:"data",label:"备注信息 ",align:"center",width:"200px"}}),t("el-table-column",{attrs:{prop:"set",label:"相关操作",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button-group",[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.set(a.row.id)}}},[e._v("详情")]),e.$lib.getUserRoot(e.store.root,"senior","del")?[a.row.id!=e.store.user.id?[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.del(a.row.id)}}},[e._v("删除")])]:e._e()]:e._e()],2)]}}])})],1),t("el-pagination",{staticClass:"tablePagination",attrs:{"current-page":e.page.current,total:e.page.total,"page-size":e.page.size,"page-sizes":e.page.sizes,"pager-count":e.page.count,layout:"prev,pager,next,jumper,sizes,total"},on:{"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)},"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"size-change":function(t){return e.record(1)},"current-change":function(t){return e.record(0)}}}),t("el-dialog",{directives:[{name:"madeDialog",rawName:"v-madeDialog"}],attrs:{visible:e.dialog,title:"详情",width:"420px"},on:{"update:visible":function(t){e.dialog=t}}},[t("transition",{attrs:{name:"el-fade-in"}},[e.dialog?[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入用户名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e.form.id!=e.store.user.id?[t("el-form-item",{attrs:{label:"所属组织",prop:"frame"}},[t("nodTree",{attrs:{treeData:e.store.frame,placeholder:"请选择所属组织"},model:{value:e.form.frame,callback:function(t){e.$set(e.form,"frame",t)},expression:"form.frame"}})],1),null!=e.form.frame&&0!=e.form.frame?[t("el-form-item",{attrs:{label:"用户角色",prop:"role"}},[t("nodList",{attrs:{placeholder:"请选择用户角色",action:"service/roleRecord",scene:"role"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}})],1)]:e._e()]:e._e(),t("el-form-item",{attrs:{label:"用户账号",prop:"user"}},[t("el-input",{attrs:{placeholder:"请输入用户账号"},model:{value:e.form.user,callback:function(t){e.$set(e.form,"user",t)},expression:"form.user"}})],1),t("el-form-item",{attrs:{label:"手机号码",prop:"tel"}},[t("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),t("el-form-item",{attrs:{label:"用户密码",prop:"pwd"}},[t("el-input",{attrs:{placeholder:0==e.form.id?"请输入用户密码":"不修改密码请留空"},model:{value:e.form.pwd,callback:function(t){e.$set(e.form,"pwd",t)},expression:"form.pwd"}})],1),t("el-form-item",{attrs:{label:"用户头像",prop:"img"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$base.web+"user/upload",headers:{Token:e.$store.state.token},"show-file-list":!1,"on-success":e.uploadSuccess}},[""!=e.form.img?t("el-tooltip",{attrs:{content:"单击鼠标右键删除头像"}},[t("img",{staticClass:"userAvatar",attrs:{src:e.form.img},on:{contextmenu:function(t){e.form.img=""}}})]):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1),t("FieldForm",{attrs:{rule:"user",prefix:"more."},model:{value:e.form.more,callback:function(t){e.$set(e.form,"more",t)},expression:"form.more"}}),t("el-form-item",{attrs:{label:"备注信息"}},[t("el-input",{attrs:{placeholder:"请输入备注信息"},model:{value:e.form.data,callback:function(t){e.$set(e.form,"data",t)},expression:"form.data"}})],1)],2)]:e._e()],2),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取消")]),0==e.form.id||e.$lib.getUserRoot(e.store.root,"senior","edit")?[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])]:e._e()],2)],1)],1)},s=[],o=(a("d9e2"),a("c740"),a("a434"),a("23f7")),n=a("a447"),i=a("5fb4"),l={name:"User",components:{NodTree:o["a"],NodList:n["a"],FieldForm:i["a"]},data:function(){var e=this;return{searchFrom:{name:"",user:"",tel:"",data:""},tableData:[],page:{current:1,total:0,size:30,sizes:[30,60,90,150,300],count:5},dialog:!1,form:{id:0,name:"",frame:null,role:null,user:"",tel:"",pwd:"",img:"",data:"",more:{}},rules:{name:{required:!0,message:"请输入用户名称",trigger:"blur"},frame:{required:!0,message:"请选择所属组织",trigger:"change"},role:{required:!0,message:"请选择用户角色",trigger:"change"},user:{required:!0,message:"请输入用户账号",trigger:"blur"},tel:[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:function(t,a,r){e.$lib.validate("tel",a)?r():r(new Error("手机号码不正确"))},trigger:"blur"}]}}},created:function(){this.record(1)},computed:{store:function(){return this.$store.state},formFrame:function(){return this.form.frame}},watch:{formFrame:function(e){0==e&&(this.form.role=null)}},methods:{record:function(e){var t=this;0==e||(this.page.current=e);var a=Object.assign({page:this.page.current,limit:this.page.size},this.searchFrom);this.$axios.post("user/record",a).then((function(e){"success"==e.state?(t.tableData=e.info,t.page.total=e.count,t.$refs["searchPopover"].showPopper=!1):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},set:function(e){var t=this;this.form=this.$lib.extend(!0,{},this.$options.data().form),e>0?this.$axios.post("user/get",{id:e}).then((function(e){"success"==e.state?(e.info.pwd="",t.form=e.info,t.dialog=!0):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})})):this.dialog=!0},save:function(){var e=this;this.$refs["form"].validate((function(t){if(t){if(0==e.form.id&&e.$lib.validate("empty",e.form.pwd))return e.$message({type:"warning",message:"用户密码不可为空!"}),!1;e.$axios.post("user/save",e.form).then((function(t){"success"==t.state?(e.record(0),e.dialog=!1,e.$message({type:"success",message:"详情保存成功!"})):"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))}}))},del:function(e){var t=this;this.$confirm("您确定要删除该数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.post("user/del",{id:e}).then((function(e){"success"==e.state?(t.record(0),t.$message({type:"success",message:"删除成功!"})):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))})).catch((function(){}))},uploadSuccess:function(e,t,a){"success"==e.state?this.form.img=e.info:"error"==e.state?(a.splice(a.findIndex((function(e){return e.uid==t.uid})),1),this.$message({type:"warning",message:"[ "+t.name+" ]"+e.info})):this.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})},reload:function(){this.$bus.emit("homeReload",this.$options.name),this.$message({type:"success",message:"页面刷新成功!"})}}},c=l,u=(a("ff98"),a("2877")),d=Object(u["a"])(c,r,s,!1,null,"357a0c8a",null);t["default"]=d.exports},"5fb4":function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return e.fields.length>0?t("draggable",{staticClass:"fieldForm",attrs:{list:e.fields,disabled:!e.drag,tag:"div"},on:{choose:e.dragChoose,end:e.dragEnd}},[e._l(e.fields,(function(a,r){return[t("el-form-item",{key:r,attrs:{label:a.label,prop:e.prefix+a.prop,rules:a.rules}},["text"==a.type?[t("el-input",{attrs:{type:"text",placeholder:a.placeholder},model:{value:e.source[a.model],callback:function(t){e.$set(e.source,a.model,t)},expression:"source[field.model]"}})]:e._e(),"time"==a.type?[t("el-date-picker",{attrs:{type:"date",placeholder:a.placeholder,"value-format":"yyyy-MM-dd"},model:{value:e.source[a.model],callback:function(t){e.$set(e.source,a.model,t)},expression:"source[field.model]"}})]:e._e(),"textarea"==a.type?[t("el-input",{attrs:{type:"textarea",placeholder:a.placeholder},model:{value:e.source[a.model],callback:function(t){e.$set(e.source,a.model,t)},expression:"source[field.model]"}})]:e._e(),"select"==a.type?[t("el-select",{attrs:{placeholder:a.placeholder,clearable:""},model:{value:e.source[a.model],callback:function(t){e.$set(e.source,a.model,t)},expression:"source[field.model]"}},e._l(a.options,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)]:e._e(),"checkbox"==a.type?[t("el-checkbox-group",{model:{value:e.source[a.model],callback:function(t){e.$set(e.source,a.model,t)},expression:"source[field.model]"}},e._l(a.checkboxs,(function(e){return t("el-checkbox",{key:e,attrs:{label:e}})})),1)]:e._e(),"upload"==a.type?[t("NodUpload",{attrs:{action:e.$base.web+"service/fieldUpload"},model:{value:e.source[a.model],callback:function(t){e.$set(e.source,a.model,t)},expression:"source[field.model]"}})]:e._e()],2)]}))],2):e._e()},s=[],o=a("b85c"),n=a("b76a"),i=a.n(n),l=a("5549"),c={name:"FieldForm",components:{draggable:i.a,NodUpload:l["a"]},props:{value:{required:!0,type:Object},prefix:{default:""},rule:{required:!0},drag:{default:!1}},data:function(){return{source:{},fields:[]}},computed:{store:function(){return this.$store.state}},watch:{value:{handler:function(e){this.$lib.comparison(e,this.source)||this.init()},deep:!0},source:{handler:function(e){this.$emit("input",this.$lib.extend(!0,{},this.source))},deep:!0}},created:function(){Array.isArray(this.rule)?(this.fields=this.rule,this.init()):this.store.fields.hasOwnProperty(this.rule)&&(this.fields=this.store.fields[this.rule],this.init())},methods:{init:function(){var e,t={},a={},r=Object(o["a"])(this.fields);try{for(r.s();!(e=r.n()).done;){var s=e.value;t[s.model]=s.value,this.value.hasOwnProperty(s.model)&&!this.$lib.VariableEqual(s.value,this.value[s.model])&&(a[s.model]=s.value)}}catch(n){r.e(n)}finally{r.f()}this.source=this.$lib.extend(!0,{},t,this.value,a)},dragChoose:function(e){this.$emit("dragChoose",e.oldIndex)},dragEnd:function(e){this.$emit("dragEnd",e.newIndex)}}},u=c,d=a("2877"),m=Object(d["a"])(u,r,s,!1,null,null,null);t["a"]=m.exports},"71a1":function(e,t,a){},7384:function(e,t,a){},"7b76":function(e,t,a){},"7be3":function(e,t,a){"use strict";a("cecc")},"841c":function(e,t,a){"use strict";var r=a("c65b"),s=a("d784"),o=a("825a"),n=a("861d"),i=a("1d80"),l=a("129f"),c=a("577e"),u=a("dc4a"),d=a("14c3");s("search",(function(e,t,a){return[function(t){var a=i(this),s=n(t)?u(t,e):void 0;return s?r(s,t,a):new RegExp(t)[e](c(a))},function(e){var r=o(this),s=c(e),n=a(t,r,s);if(n.done)return n.value;var i=r.lastIndex;l(i,0)||(r.lastIndex=0);var u=d(r,s);return l(r.lastIndex,i)||(r.lastIndex=i),null===u?-1:u.index}]}))},"8bc8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"log area"},[t("div",{staticClass:"layout"},[t("el-popover",{ref:"searchPopover",attrs:{"popper-class":"searchPopover",placement:"bottom-start"}},[t("el-form",{ref:"searchFrom",staticClass:"searchFrom",attrs:{inline:""}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入操作内容",clearable:""},model:{value:e.searchFrom.info,callback:function(t){e.$set(e.searchFrom,"info",t)},expression:"searchFrom.info"}})],1),t("el-form-item",[t("nodList",{attrs:{placeholder:"请选择操作用户",action:"service/userRecord",scene:"user"},model:{value:e.searchFrom.user,callback:function(t){e.$set(e.searchFrom,"user",t)},expression:"searchFrom.user"}})],1),t("el-form-item",[t("el-date-picker",{attrs:{placeholder:"请输入开始日期","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.searchFrom.startTime,callback:function(t){e.$set(e.searchFrom,"startTime",t)},expression:"searchFrom.startTime"}})],1),t("el-form-item",[t("el-date-picker",{attrs:{placeholder:"请输入结束日期","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.searchFrom.endTime,callback:function(t){e.$set(e.searchFrom,"endTime",t)},expression:"searchFrom.endTime"}})],1),t("el-divider"),t("el-button",{staticClass:"searchBtn",attrs:{icon:"el-icon-search"},on:{click:function(t){return e.record(1)}}})],1),t("el-button",{attrs:{slot:"reference",icon:"el-icon-more"},slot:"reference"})],1),t("el-button-group",[e.$lib.getUserRoot(e.store.root,"senior","del")?[t("el-button",{on:{click:e.empty}},[e._v("清空")])]:e._e(),t("el-button",{on:{click:e.reload}},[e._v("刷新")])],2)],1),t("el-divider"),t("el-table",{attrs:{data:e.tableData,height:"calc(100% - 90px)",border:""}},[t("el-table-column",{attrs:{prop:"time",label:"操作时间",align:"center",width:"200px"}}),t("el-table-column",{attrs:{prop:"userData.name",label:"操作用户",align:"center",width:"160px"}}),t("el-table-column",{attrs:{prop:"info",label:"操作内容 ",align:"center",width:"360px"}})],1),t("el-pagination",{staticClass:"tablePagination",attrs:{"current-page":e.page.current,total:e.page.total,"page-size":e.page.size,"page-sizes":e.page.sizes,"pager-count":e.page.count,layout:"prev,pager,next,jumper,sizes,total"},on:{"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)},"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"size-change":function(t){return e.record(1)},"current-change":function(t){return e.record(0)}}})],1)},s=[],o=(a("b0c0"),a("a447")),n={name:"Log",components:{NodList:o["a"]},data:function(){return{page:{current:1,total:0,size:30,sizes:[30,60,90,150,300],count:5},tableData:[],searchFrom:{info:"",user:"",startTime:"",endTime:""}}},created:function(){this.init(),this.record(1)},computed:{store:function(){return this.$store.state}},methods:{init:function(){this.searchFrom.startTime=this.$moment().subtract(this.store.sys.fun.days,"days").format("YYYY-MM-DD"),this.searchFrom.endTime=this.$moment().format("YYYY-MM-DD")},record:function(e){var t=this;0==e||(this.page.current=e);var a=Object.assign({page:this.page.current,limit:this.page.size},this.searchFrom);this.$axios.post("log/record",a).then((function(e){"success"==e.state?(t.tableData=e.info,t.page.total=e.count,t.$refs["searchPopover"].showPopper=!1):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},empty:function(){var e=this;this.$confirm("您确定要清空日志吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.post("log/empty").then((function(t){"success"==t.state?(e.record(1),e.$message({type:"success",message:"清空日志成功!"})):"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))})).catch((function(){}))},reload:function(){this.$bus.emit("homeReload",this.$options.name),this.$message({type:"success",message:"页面刷新成功!"})}}},i=n,l=(a("b6e8"),a("2877")),c=Object(l["a"])(i,r,s,!1,null,"0592b035",null);t["default"]=c.exports},9019:function(e,t,a){},a337:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"role area"},[t("div",{staticClass:"layout"},[t("el-popover",{ref:"searchPopover",attrs:{"popper-class":"searchPopover",placement:"bottom-start"}},[t("el-form",{ref:"searchFrom",staticClass:"searchFrom",attrs:{inline:""}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入角色名称",clearable:""},model:{value:e.searchFrom.name,callback:function(t){e.$set(e.searchFrom,"name",t)},expression:"searchFrom.name"}})],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入备注信息",clearable:""},model:{value:e.searchFrom.data,callback:function(t){e.$set(e.searchFrom,"data",t)},expression:"searchFrom.data"}})],1),t("el-divider"),t("el-button",{staticClass:"searchBtn",attrs:{icon:"el-icon-search"},on:{click:function(t){return e.record(1)}}})],1),t("el-button",{attrs:{slot:"reference",icon:"el-icon-more"},slot:"reference"})],1),t("el-button-group",[e.$lib.getUserRoot(e.store.root,"senior","add")?[t("el-button",{on:{click:function(t){return e.set(0)}}},[e._v("新增")])]:e._e(),t("el-button",{on:{click:e.reload}},[e._v("刷新")])],2)],1),t("el-divider"),t("el-table",{attrs:{data:e.tableData,height:"calc(100% - 90px)",border:""}},[t("el-table-column",{attrs:{prop:"name",label:"角色名称",align:"center",width:"200px"}}),t("el-table-column",{attrs:{prop:"data",label:"备注信息 ",align:"center",width:"200px"}}),t("el-table-column",{attrs:{prop:"set",label:"相关操作",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button-group",[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.set(a.row.id)}}},[e._v("详情")]),e.$lib.getUserRoot(e.store.root,"senior","del")?[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.del(a.row.id)}}},[e._v("删除")])]:e._e()],2)]}}])})],1),t("el-pagination",{staticClass:"tablePagination",attrs:{"current-page":e.page.current,total:e.page.total,"page-size":e.page.size,"page-sizes":e.page.sizes,"pager-count":e.page.count,layout:"prev,pager,next,jumper,sizes,total"},on:{"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)},"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"size-change":function(t){return e.record(1)},"current-change":function(t){return e.record(0)}}}),t("el-dialog",{directives:[{name:"madeDialog",rawName:"v-madeDialog"}],attrs:{visible:e.dialog.show,title:"详情",width:"608px"},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[t("transition",{attrs:{name:"el-fade-in"}},[e.dialog.show?[t("el-tabs",{model:{value:e.dialog.active,callback:function(t){e.$set(e.dialog,"active",t)},expression:"dialog.active"}},[t("el-tab-pane",{attrs:{label:"基础资料",name:"base"}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"备注信息"}},[t("el-input",{attrs:{placeholder:"请输入备注信息"},model:{value:e.form.data,callback:function(t){e.$set(e.form,"data",t)},expression:"form.data"}})],1)],1)],1),t("el-tab-pane",{attrs:{label:"功能权限",name:"root"}},[t("el-table",{directives:[{name:"madeTable",rawName:"v-madeTable"}],attrs:{data:e.form.root,border:""}},[t("el-table-column",{attrs:{prop:"name",label:"模块名称",align:"center","min-width":"100px",fixed:"left"}}),t("el-table-column",{attrs:{label:"新增",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(a){return[void 0==a.row.data.add?[e._v("-")]:[t("el-checkbox",{model:{value:a.row.data.add,callback:function(t){e.$set(a.row.data,"add",t)},expression:"scope.row.data.add"}})]]}}],null,!1,1829974007)}),t("el-table-column",{attrs:{label:"删除",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(a){return[void 0==a.row.data.del?[e._v("-")]:[t("el-checkbox",{model:{value:a.row.data.del,callback:function(t){e.$set(a.row.data,"del",t)},expression:"scope.row.data.del"}})]]}}],null,!1,723849271)}),t("el-table-column",{attrs:{label:"修改",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(a){return[void 0==a.row.data.edit?[e._v("-")]:[t("el-checkbox",{model:{value:a.row.data.edit,callback:function(t){e.$set(a.row.data,"edit",t)},expression:"scope.row.data.edit"}})]]}}],null,!1,3097141879)}),t("el-table-column",{attrs:{label:"查看",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(a){return[void 0==a.row.data.see?[e._v("-")]:[t("el-checkbox",{model:{value:a.row.data.see,callback:function(t){e.$set(a.row.data,"see",t)},expression:"scope.row.data.see"}})]]}}],null,!1,4210457847)}),t("el-table-column",{attrs:{label:"批量",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(a){return[void 0==a.row.data.batch?[e._v("-")]:[t("el-checkbox",{model:{value:a.row.data.batch,callback:function(t){e.$set(a.row.data,"batch",t)},expression:"scope.row.data.batch"}})]]}}],null,!1,3358494167)}),t("el-table-column",{attrs:{label:"审核|反审核",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(a){return[void 0==a.row.data.examine?[e._v("-")]:[t("el-checkbox",{model:{value:a.row.data.examine,callback:function(t){e.$set(a.row.data,"examine",t)},expression:"scope.row.data.examine"}})]]}}],null,!1,2248471543)})],1)],1),t("el-tab-pane",{attrs:{label:"数据权限",name:"auth"}},[t("el-form",{attrs:{model:e.form.auth,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"组织机构"}},[t("nodTree",{staticStyle:{display:"inline-block"},attrs:{treeData:e.treeData,checkStrictly:!0,placeholder:"请选择组织机构"},model:{value:e.form.auth.frame,callback:function(t){e.$set(e.form.auth,"frame",t)},expression:"form.auth.frame"}})],1),t("el-form-item",{attrs:{label:"客户"}},[t("el-select",{attrs:{placeholder:"请选择客户数据"},model:{value:e.form.auth.customer,callback:function(t){e.$set(e.form.auth,"customer",t)},expression:"form.auth.customer"}},[t("el-option",{attrs:{label:"全部数据",value:"all"}}),t("el-option",{attrs:{label:"用户数据",value:"userId"}}),t("el-option",{attrs:{label:"组织数据",value:"roleFrame"}})],1)],1),t("el-form-item",{attrs:{label:"供应商"}},[t("el-select",{attrs:{placeholder:"请选择供应商数据"},model:{value:e.form.auth.supplier,callback:function(t){e.$set(e.form.auth,"supplier",t)},expression:"form.auth.supplier"}},[t("el-option",{attrs:{label:"全部数据",value:"all"}}),t("el-option",{attrs:{label:"用户数据",value:"userId"}}),t("el-option",{attrs:{label:"组织数据",value:"roleFrame"}})],1)],1),t("el-form-item",{attrs:{label:"仓库"}},[t("el-select",{attrs:{placeholder:"请选择仓库数据"},model:{value:e.form.auth.warehouse,callback:function(t){e.$set(e.form.auth,"warehouse",t)},expression:"form.auth.warehouse"}},[t("el-option",{attrs:{label:"全部数据",value:"all"}}),t("el-option",{attrs:{label:"用户数据",value:"userFrame"}}),t("el-option",{attrs:{label:"组织数据",value:"roleFrame"}})],1)],1),t("el-form-item",{attrs:{label:"资金账户"}},[t("el-select",{attrs:{placeholder:"请选择资金账户数据"},model:{value:e.form.auth.account,callback:function(t){e.$set(e.form.auth,"account",t)},expression:"form.auth.account"}},[t("el-option",{attrs:{label:"全部数据",value:"all"}}),t("el-option",{attrs:{label:"用户数据",value:"userFrame"}}),t("el-option",{attrs:{label:"组织数据",value:"roleFrame"}})],1)],1),t("el-form-item",{attrs:{label:"用户"}},[t("el-select",{attrs:{placeholder:"请选择用户数据"},model:{value:e.form.auth.user,callback:function(t){e.$set(e.form.auth,"user",t)},expression:"form.auth.user"}},[t("el-option",{attrs:{label:"全部数据",value:"all"}}),t("el-option",{attrs:{label:"用户数据",value:"userId"}}),t("el-option",{attrs:{label:"组织数据",value:"roleFrame"}})],1)],1),t("el-form-item",{attrs:{label:"人员"}},[t("el-select",{attrs:{placeholder:"请选择人员数据"},model:{value:e.form.auth.people,callback:function(t){e.$set(e.form.auth,"people",t)},expression:"form.auth.people"}},[t("el-option",{attrs:{label:"全部数据",value:"all"}}),t("el-option",{attrs:{label:"用户数据",value:"userFrame"}}),t("el-option",{attrs:{label:"组织数据",value:"roleFrame"}})],1)],1)],1)],1)],1)]:e._e()],2),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialog.show=!1}}},[e._v("取消")]),0==e.form.id||e.$lib.getUserRoot(e.store.root,"senior","edit")?[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])]:e._e()],2)],1)],1)},s=[],o=a("23f7"),n={name:"Role",components:{NodTree:o["a"]},data:function(){return{searchFrom:{name:"",data:""},tableData:[],page:{current:1,total:0,size:30,sizes:[30,60,90,150,300],count:5},frame:[],dialog:{show:!1,active:"base"},form:{id:0,name:"",data:"",root:[{name:"采购订单",module:"bor",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"采购单",module:"buy",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"采购退货单",module:"bre",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"销售订单",module:"sor",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"销售单",module:"sell",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"销售退货单",module:"sre",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"库存查询",module:"stock",data:{see:!0}},{name:"批次查询",module:"batch",data:{see:!0}},{name:"序列查询",module:"serial",data:{see:!0}},{name:"库存盘点",module:"inventory",data:{see:!0}},{name:"调拨单",module:"swap",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"其它入库单",module:"entry",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"其它出库单",module:"extry",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"收款单",module:"imy",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"付款单",module:"omy",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"核销单",module:"bill",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"转账单",module:"allot",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"其它收入单",module:"ice",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"其它支出单",module:"oce",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0,examine:!0}},{name:"购销费用",module:"cost",data:{edit:!0,see:!0,batch:!0}},{name:"购销发票",module:"invoice",data:{del:!0,edit:!0,see:!0,batch:!0}},{name:"采购报表",module:"brt",data:{see:!0}},{name:"销售报表",module:"srt",data:{see:!0}},{name:"销售报表",module:"mrt",data:{see:!0}},{name:"仓库报表",module:"wrf",data:{see:!0}},{name:"资金报表",module:"crt",data:{see:!0}},{name:"基础资料",module:"base",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0}},{name:"辅助资料",module:"assist",data:{add:!0,del:!0,edit:!0,see:!0,batch:!0}},{name:"高级设置",module:"senior",data:{add:!0,del:!0,edit:!0,see:!0}}],auth:{frame:[-2],customer:"all",supplier:"all",warehouse:"all",account:"all",user:"all",people:"all"}},rules:{name:{required:!0,message:"请输入角色名称",trigger:"blur"}}}},created:function(){this.getFrame(),this.record(1)},computed:{store:function(){return this.$store.state},treeData:function(){return[{id:-2,name:"全部数据",sub:[]},{id:-1,name:"用户数据",sub:[]},{id:0,name:"默认组织",sub:this.frame}]}},methods:{getFrame:function(){var e=this;this.$axios.post("frame/record").then((function(t){"success"==t.state?e.frame=t.info:"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},record:function(e){var t=this;0==e||(this.page.current=e);var a=Object.assign({page:this.page.current,limit:this.page.size},this.searchFrom);this.$axios.post("role/record",a).then((function(e){"success"==e.state?(t.tableData=e.info,t.page.total=e.count,t.$refs["searchPopover"].showPopper=!1):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},set:function(e){var t=this;this.form=this.$lib.extend(!0,{},this.$options.data().form),e>0?this.$axios.post("role/get",{id:e}).then((function(e){"success"==e.state?(t.form=e.info,t.dialog.show=!0):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})})):this.dialog.show=!0},save:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=e.form.auth.frame;0==a.length?e.$message({type:"warning",message:"组织机构不可为空!"}):1==a.length||-1==a.indexOf(-2)&&-1==a.indexOf(-1)?e.$axios.post("role/save",e.form).then((function(t){"success"==t.state?(e.record(0),e.dialog.show=!1,e.$message({type:"success",message:"详情保存成功!"})):"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})})):e.$message({type:"warning",message:"组织机构[ 全部数据 - 用户数据 - 默认组织]为互拆关系!"})}}))},del:function(e){var t=this;this.$confirm("您确定要删除选中数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.post("role/del",{id:e}).then((function(e){"success"==e.state?(t.record(0),t.$message({type:"success",message:"删除成功!"})):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))})).catch((function(){}))},reload:function(){this.$bus.emit("homeReload",this.$options.name),this.$message({type:"success",message:"页面刷新成功!"})}}},i=n,l=(a("26f7"),a("2877")),c=Object(l["a"])(i,r,s,!1,null,"385de111",null);t["default"]=c.exports},a447:function(e,t,a){"use strict";a("b0c0");var r=function(){var e=this,t=e._self._c;return t("el-popover",{ref:"nodList",staticClass:"nodList",attrs:{disabled:e.disabled}},[t("template",{slot:"reference"},[t("el-input",{ref:"label",attrs:{placeholder:e.placeholder,tabindex:"-1",disabled:e.disabled,readonly:""},nativeOn:{keydown:function(t){return e.inputEvent.apply(null,arguments)}},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}},[t("template",{slot:"suffix"},[t("i",{class:["el-input__icon",""==e.label?"el-icon-arrow-down":"el-icon-circle-close"],on:{click:function(t){return t.stopPropagation(),e.delModel.apply(null,arguments)}}})])],2)],1),t("div",{staticClass:"selectBox"},[t("el-input",{ref:"search",attrs:{placeholder:"F1 输入内容回车搜索","prefix-icon":"el-icon-search",size:"mini",tagkey:"search"},nativeOn:{keydown:function(t){return t.stopPropagation(),e.searchEvent.apply(null,arguments)}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e.optionList.length>0?[t("ul",{staticClass:"list"},[e._l(e.optionList,(function(a,r){return[t("li",{class:[{selected:a.id==e.value},{foucs:r==e.foucs}],on:{click:function(t){return e.setOption(a)}}},[e._v(e._s(a.name))])]}))],2)]:[t("p",{staticClass:"emptyList"},[e._v("未查询到数据")])],t("div",{staticClass:"operate"},[t("el-pagination",{attrs:{"current-page":e.page.current,total:e.page.total,"page-size":e.page.size,layout:"prev,next,total",background:""},on:{"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)},"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"current-change":function(t){return e.record(0)}}})],1)],2)],2)},s=[],o=(a("7db0"),a("e9f5"),a("f665"),a("d3b7"),a("ac1f"),a("841c"),{name:"NodList",props:{value:{required:!0},action:{required:!0},scene:{required:!0},parm:{default:function(){return{}}},disabled:{default:!1},placeholder:{default:"请点击选择数据"}},data:function(){return{id:null,label:"",query:"",optionList:[],foucs:0,page:{current:1,total:0,size:6}}},created:function(){this.record(1),this.get()},watch:{value:function(e,t){e==t||this.get()}},methods:{init:function(){this.id=null,this.label="",this.query="",this.page={current:1,total:0,size:6},this.record(1),this.$emit("input",null),this.$emit("change",null)},record:function(e){var t=this;0==e||(this.page.current=e);var a=Object.assign({},this.parm,{page:this.page.current,limit:this.page.size,query:this.query});this.$axios.post(this.action,a).then((function(e){"success"==e.state?(t.optionList=e.info,t.page.total=e.count,t.optionList.length>0&&"search"==document.activeElement.getAttribute("tagkey")&&(t.foucs=0,t.$refs.label.focus())):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},get:function(){var e=this;if(null!=this.value&&!this.$lib.validate("empty",this.value)){var t=this.optionList.find((function(t){return t.id==e.value}));void 0==t?this.$axios.post("service/getScene",{id:this.value,scene:this.scene}).then((function(t){"success"==t.state?null==t.info?e.$message({type:"warning",message:"[ NodList ]指定数据查询结果为空!"}):e.setOption(t.info):"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})})):this.setOption(t)}},setOption:function(e){e.id!=this.id&&(this.id=e.id,this.label=e.name,this.$emit("input",e.id),this.$emit("change",e)),this.$refs["nodList"].showPopper=!1},delModel:function(){this.id=null,this.label="",this.$emit("input",null),this.$emit("change",null),this.$refs["nodList"].showPopper=!1},switchState:function(){this.$refs.label.focus(),this.$refs["nodList"].showPopper=!this.$refs["nodList"].showPopper},inputEvent:function(e){var t=e.keyCode;this.$refs["nodList"].showPopper?13==t?this.setOption(this.optionList[this.foucs]):27==t?e.stopPropagation():38==t?this.optionList.hasOwnProperty(this.foucs-1)&&this.foucs--:40==t?this.optionList.hasOwnProperty(this.foucs+1)&&this.foucs++:112==t&&(this.$refs.search.focus(),e.preventDefault(),e.stopPropagation()):13==t&&(this.$refs["nodList"].showPopper=!0),46==t&&this.delModel()},searchEvent:function(e){var t=e.keyCode;13==t?this.record(1):27==t?(this.$refs.label.focus(),this.$refs["nodList"].showPopper=!1):112==t&&e.preventDefault()}}}),n=o,i=(a("bdbf"),a("2877")),l=Object(i["a"])(n,r,s,!1,null,"404ad2bf",null);t["a"]=l.exports},af4e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"period area"},[t("div",{staticClass:"layout"},[t("el-date-picker",{staticClass:"date",attrs:{placeholder:"结账日期","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),t("el-button-group",[t("el-button",{on:{click:e.save}},[e._v("结账")]),t("el-button",{on:{click:e.back}},[e._v("反结账")]),t("el-button",{on:{click:e.reload}},[e._v("刷新")])],1)],1),t("el-divider"),t("el-table",{attrs:{data:e.tableData,height:"calc(100% - 90px)",border:""}},[t("el-table-column",{attrs:{prop:"date",label:"结账日期",align:"center",width:"200px"}}),t("el-table-column",{attrs:{prop:"time",label:"操作日期",align:"center",width:"160px"}}),t("el-table-column",{attrs:{prop:"userData.name",label:"操作人",align:"center",width:"160px"}})],1),t("el-pagination",{staticClass:"tablePagination",attrs:{"current-page":e.page.current,total:e.page.total,"page-size":e.page.size,"page-sizes":e.page.sizes,"pager-count":e.page.count,layout:"prev,pager,next,jumper,sizes,total"},on:{"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)},"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"size-change":function(t){return e.record(1)},"current-change":function(t){return e.record(0)}}})],1)},s=[],o=(a("b0c0"),{name:"Period",data:function(){return{date:"",tableData:[],page:{current:1,total:0,size:30,sizes:[30,60,90,150,300],count:5}}},created:function(){this.init(),this.record(1)},computed:{store:function(){return this.$store.state}},methods:{init:function(){this.date=this.$moment().format("YYYY-MM-DD")},record:function(e){var t=this;0==e||(this.page.current=e);var a={page:this.page.current,limit:this.page.size};this.$axios.post("period/record",a).then((function(e){"success"==e.state?(t.tableData=e.info,t.page.total=e.count):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},save:function(){var e=this,t=this.date;this.$lib.validate("time",t)?this.$axios.post("period/save",{date:this.date}).then((function(t){"success"==t.state?(e.record(1),e.$message({type:"success",message:"结账成功!"})):"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})})):this.$message({type:"warning",message:"结账日期不正确!"})},back:function(){var e=this;this.$confirm("您确定要反结账吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.post("period/back").then((function(t){"success"==t.state?(e.record(1),e.$message({type:"success",message:"反结账成功!"})):"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))})).catch((function(){}))},reload:function(){this.$bus.emit("homeReload",this.$options.name),this.$message({type:"success",message:"页面刷新成功!"})}}}),n=o,i=(a("5b6a"),a("2877")),l=Object(i["a"])(n,r,s,!1,null,"86700f08",null);t["default"]=l.exports},b6e8:function(e,t,a){"use strict";a("7b76")},bdbf:function(e,t,a){"use strict";a("c54b")},bddc:function(e,t,a){"use strict";a("25db")},befc:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"summary area"},[t("div",{staticClass:"progress"},[t("el-progress",{attrs:{type:"circle",percentage:e.per}})],1),t("div",{staticClass:"btnGroup"},[t("el-button",{attrs:{type:"primary",disabled:0!=e.per&&100!=e.per},on:{click:e.init}},[e._v("开始校准")]),t("el-button",{attrs:{type:"info"},on:{click:e.help}},[e._v("获取帮助")])],1),t("el-card",{staticClass:"card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("校准信息：")])]),t("ul",{staticClass:"list"},[e._l(e.list,(function(a){return[t("li",[e._v(e._s(a))])]}))],2)])],1)},s=[],o={name:"Summary",data:function(){return{list:["1.数据校准将重新统计单据的收发成本。","2.本功能适用于结账确认及单据插单场景。","3.本操作很耗费系统资源，建议闲暇时执行。","4.初始化过程中禁止对系统其他模块进行操作。","5.操作过程中须保持互联网通讯，请勿手动终止。","6.如操作过程中断，需重新执行数据校准。","7.如果在使用过程中遇到问题，请联系客服解决。"],per:0,count:0,page:1,limit:30}},computed:{store:function(){return this.$store.state}},methods:{init:function(){var e=this;this.per=0;var t=this.$moment().format("HH:mm:ss");this.$axios.post("summary/init").then((function(a){"success"==a.state?(e.count=a.count,e.list=[],e.list.unshift(t+" --- 开始校准"),e.list.unshift(t+" --- 计价方法[ "+a.info.valuation+" ]"),e.list.unshift(t+" --- 核算类型[ "+a.info.branch+" ]"),e.list.unshift(t+" --- 成本规则[ "+a.info.rule+" ]"),e.list.unshift(t+" --- 数据条数[ "+a.count+" ]"),e.poll()):"error"==a.state?e.list.unshift(t+" --- "+a.info):e.list.unshift(t+" --- [ ERROR ] 服务器响应超时!")}))},poll:function(){var e=this,t=this.$moment().format("HH:mm:ss");this.$axios.post("summary/poll",{page:this.page,limit:this.limit}).then((function(a){if("success"==a.state){var r=[(e.page-1)*e.limit+1,e.page*e.limit];r[1]>e.count?(e.list.unshift(t+" --- 当前校准[ "+r[0]+" - "+e.count+" ]"),e.list.unshift(t+" --- 校准完成"),e.per=100,e.page=1):(e.list.unshift(t+" --- 当前校准[ "+r[0]+" - "+r[1]+" ]"),e.per=e.$calc.chain(r[1]).divide(e.count).multiply(100).round(2).done(),e.page++,e.poll())}else"error"==a.state?e.list.unshift(t+" --- "+a.info):e.list.unshift(t+" --- [ ERROR ] 服务器响应超时!")}))},help:function(){window.open(this.store.base.webSite)}}},n=o,i=(a("f7ea"),a("2877")),l=Object(i["a"])(n,r,s,!1,null,"60575490",null);t["default"]=l.exports},c0bf:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"backup area"},[t("div",{staticClass:"layout"},[t("el-button-group",[e.$lib.getUserRoot(e.store.root,"senior","del")?[0!=e.tableSelection.length?t("el-button",{attrs:{type:"info"},on:{click:function(t){return e.del(e.tableSelection)}}},[e._v("删除")]):e._e()]:e._e(),t("el-button",{on:{click:e.backup}},[e._v("备份")]),t("el-button",{on:{click:e.reload}},[e._v("刷新")])],2)],1),t("el-divider"),t("el-table",{directives:[{name:"madeTable",rawName:"v-madeTable"}],attrs:{data:e.tableData,height:"calc(100% - 90px)",border:""},on:{"selection-change":e.selectionChange}},[t("el-table-column",{attrs:{type:"selection",align:"center",fixed:"left",width:"39px"}}),t("el-table-column",{attrs:{prop:"time",label:"备份时间",align:"center",width:"200px"}}),t("el-table-column",{attrs:{prop:"name",label:"文件名称",align:"center",width:"260px"}}),t("el-table-column",{attrs:{prop:"size",label:"文件大小",align:"center",width:"160px"}}),t("el-table-column",{attrs:{prop:"set",label:"相关操作",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button-group",[e.$lib.getUserRoot(e.store.root,"senior","edit")?[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.restore(a.row.name)}}},[e._v("恢复")])]:e._e(),e.$lib.getUserRoot(e.store.root,"senior","del")?[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.del([a.row.name])}}},[e._v("删除")])]:e._e()],2)]}}])})],1),t("el-pagination",{staticClass:"tablePagination",attrs:{"current-page":e.page.current,total:e.page.total,"page-size":e.page.size,"page-sizes":e.page.sizes,"pager-count":e.page.count,layout:"prev,pager,next,jumper,sizes,total"},on:{"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)},"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"size-change":function(t){return e.record(1)},"current-change":function(t){return e.record(0)}}})],1)},s=[],o=a("b85c"),n=(a("14d9"),{name:"Backup",data:function(){return{page:{current:1,total:0,size:30,sizes:[30,60,90,150,300],count:5},tableData:[],tableSelection:[],searchFrom:{info:"",user:"",startTime:"",endTime:""}}},created:function(){this.init(),this.record(1)},computed:{store:function(){return this.$store.state}},methods:{init:function(){this.searchFrom.startTime=this.$moment().subtract(this.store.sys.fun.days,"days").format("YYYY-MM-DD"),this.searchFrom.endTime=this.$moment().format("YYYY-MM-DD")},record:function(e){var t=this;0==e||(this.page.current=e),this.$axios.post("backup/record",{page:this.page.current,limit:this.page.size}).then((function(e){"success"==e.state?(t.tableData=e.info,t.page.total=e.count):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},backup:function(){var e=this;this.$axios.post("backup/backup").then((function(t){"success"==t.state?(e.record(0),e.$message({type:"success",message:"备份数据成功!"})):"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},restore:function(e){var t=this;this.$confirm("您确定要恢复该备份数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.post("backup/restore",{name:e}).then((function(e){"success"==e.state?(t.record(0),t.$message({type:"success",message:"恢复备份数据成功!"})):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))})).catch((function(){}))},del:function(e){var t=this;this.$confirm("您确定要删除选中数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.post("backup/del",{parm:e}).then((function(e){"success"==e.state?(t.record(0),t.$message({type:"success",message:"删除成功!"})):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))})).catch((function(){}))},selectionChange:function(e){var t,a=[],r=Object(o["a"])(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;a.push(s.name)}}catch(n){r.e(n)}finally{r.f()}this.tableSelection=a},reload:function(){this.$bus.emit("homeReload",this.$options.name),this.$message({type:"success",message:"页面刷新成功!"})}}}),i=n,l=(a("bddc"),a("2877")),c=Object(l["a"])(i,r,s,!1,null,"14ae9726",null);t["default"]=c.exports},c54b:function(e,t,a){},cecc:function(e,t,a){},d297:function(e,t,a){},d41a:function(e,t,a){"use strict";a("0f5d")},d683:function(e,t,a){"use strict";a("d297")},df14:function(e,t,a){"use strict";a.r(t);a("4e82"),a("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"frame area"},[t("div",{staticClass:"layout"},[t("el-button-group",[e.$lib.getUserRoot(e.store.root,"senior","add")?[t("el-button",{on:{click:function(t){return e.set(0)}}},[e._v("新增")])]:e._e(),t("el-button",{on:{click:e.reload}},[e._v("刷新")])],2)],1),t("el-divider"),t("el-table",{attrs:{data:e.tableData,height:"calc(100% - 60px)","tree-props":{children:"sub"},"row-key":"id",border:""}},[t("el-table-column",{attrs:{prop:"name",label:"组织名称",width:"200px"}}),t("el-table-column",{attrs:{prop:"sort",label:"组织排序",align:"center",width:"200px"}}),t("el-table-column",{attrs:{prop:"data",label:"备注信息",align:"center",width:"200px"}}),t("el-table-column",{attrs:{prop:"set",label:"相关操作",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button-group",[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.set(a.row.id)}}},[e._v("详情")]),e.$lib.getUserRoot(e.store.root,"senior","del")?[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.del(a.row.id)}}},[e._v("删除")])]:e._e()],2)]}}])})],1),t("el-dialog",{directives:[{name:"madeDialog",rawName:"v-madeDialog"}],attrs:{visible:e.dialog,title:"详情",width:"420px"},on:{"update:visible":function(t){e.dialog=t}}},[t("transition",{attrs:{name:"el-fade-in"}},[e.dialog?[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"组织名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入组织名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"所属组织",prop:"pid"}},[t("nodTree",{attrs:{treeData:e.treeData,placeholder:"请选择所属组织"},model:{value:e.form.pid,callback:function(t){e.$set(e.form,"pid",t)},expression:"form.pid"}})],1),t("el-form-item",{attrs:{label:"组织排序",prop:"sort"}},[t("el-input",{attrs:{placeholder:"请输入组织排序"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),t("el-form-item",{attrs:{label:"备注信息"}},[t("el-input",{attrs:{placeholder:"请输入备注信息"},model:{value:e.form.data,callback:function(t){e.$set(e.form,"data",t)},expression:"form.data"}})],1)],1)]:e._e()],2),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取消")]),0==e.form.id||e.$lib.getUserRoot(e.store.root,"senior","edit")?[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])]:e._e()],2)],1)],1)},s=[],o=(a("d9e2"),a("23f7")),n={name:"Frame",components:{NodTree:o["a"]},data:function(){var e=this;return{tableData:[],dialog:!1,form:{id:0,pid:null,name:"",sort:0,data:""},rules:{name:{required:!0,message:"请输入组织名称",trigger:"blur"},pid:{required:!0,message:"请选择所属组织",trigger:"change"},sort:[{required:!0,message:"请输入组织排序",trigger:"blur"},{validator:function(t,a,r){e.$lib.validate("number",a)?r():r(new Error("组织排序不正确"))},trigger:"blur"}]}}},created:function(){this.record()},computed:{store:function(){return this.$store.state},treeData:function(){return[{id:0,name:"默认组织",sub:this.tableData}]}},methods:{record:function(){var e=this;this.$axios.post("frame/record").then((function(t){"success"==t.state?e.tableData=t.info:"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},set:function(e){var t=this;this.form=Object.assign({},this.$options.data().form),e>0?this.$axios.post("frame/get",{id:e}).then((function(e){"success"==e.state?(t.form=e.info,t.dialog=!0):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})})):this.dialog=!0},save:function(){var e=this;this.$refs["form"].validate((function(t){t&&e.$axios.post("frame/save",e.form).then((function(t){"success"==t.state?(e.dialog=!1,e.record(),e.$lib.updateStore(e),e.$message({type:"success",message:"详情保存成功!"})):"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))}))},del:function(e){var t=this;this.$confirm("您确定要删除该数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.post("frame/del",{id:e}).then((function(e){"success"==e.state?(t.record(),t.$lib.updateStore(t),t.$message({type:"success",message:"删除成功!"})):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))})).catch((function(){}))},reload:function(){this.$bus.emit("homeReload",this.$options.name),this.$message({type:"success",message:"页面刷新成功!"})}}},i=n,l=(a("d41a"),a("2877")),c=Object(l["a"])(i,r,s,!1,null,"7f29b6c4",null);t["default"]=c.exports},df5c:function(e,t,a){},e516:function(e,t,a){"use strict";a("df5c")},f1f7:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"people area"},[t("div",{staticClass:"layout"},[t("el-popover",{ref:"searchPopover",attrs:{"popper-class":"searchPopover",placement:"bottom-start"}},[t("el-form",{ref:"searchFrom",staticClass:"searchFrom",attrs:{inline:""}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入人员名称",clearable:""},model:{value:e.searchFrom.name,callback:function(t){e.$set(e.searchFrom,"name",t)},expression:"searchFrom.name"}})],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入人员编号",clearable:""},model:{value:e.searchFrom.number,callback:function(t){e.$set(e.searchFrom,"number",t)},expression:"searchFrom.number"}})],1),t("el-form-item",[t("el-select",{attrs:{placeholder:"请选择人员性别",clearable:""},model:{value:e.searchFrom.sex,callback:function(t){e.$set(e.searchFrom,"sex",t)},expression:"searchFrom.sex"}},[t("el-option",{attrs:{label:"女",value:1}}),t("el-option",{attrs:{label:"男",value:2}})],1)],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入联系电话",clearable:""},model:{value:e.searchFrom.tel,callback:function(t){e.$set(e.searchFrom,"tel",t)},expression:"searchFrom.tel"}})],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入联系地址",clearable:""},model:{value:e.searchFrom.add,callback:function(t){e.$set(e.searchFrom,"add",t)},expression:"searchFrom.add"}})],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入身份证号",clearable:""},model:{value:e.searchFrom.card,callback:function(t){e.$set(e.searchFrom,"card",t)},expression:"searchFrom.card"}})],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入备注信息",clearable:""},model:{value:e.searchFrom.data,callback:function(t){e.$set(e.searchFrom,"data",t)},expression:"searchFrom.data"}})],1),t("el-divider"),t("el-button",{staticClass:"searchBtn",attrs:{icon:"el-icon-search"},on:{click:function(t){return e.record(1)}}})],1),t("el-button",{attrs:{slot:"reference",icon:"el-icon-more"},slot:"reference"})],1),t("el-button-group",[0!=e.tableSelection.length?[e.$lib.getUserRoot(e.store.root,"senior","del")?[t("el-button",{attrs:{type:"info"},on:{click:function(t){return e.del(e.tableSelection)}}},[e._v("删除")])]:e._e()]:e._e(),e.$lib.getUserRoot(e.store.root,"senior","add")?[t("el-button",{on:{click:function(t){return e.set(0)}}},[e._v("新增")])]:e._e(),e.$lib.getUserRoot(e.store.root,"senior","batch")?[t("el-button",{on:{click:function(t){e.batch.dialog=!0}}},[e._v("批量")])]:e._e(),t("el-button",{on:{click:e.reload}},[e._v("刷新")])],2)],1),t("el-divider"),t("el-table",{directives:[{name:"madeTable",rawName:"v-madeTable"}],attrs:{data:e.tableData,height:"calc(100% - 90px)",border:""},on:{"selection-change":e.selectionChange}},[t("el-table-column",{attrs:{type:"selection",align:"center",width:"39px",fixed:"left"}}),t("el-table-column",{attrs:{prop:"name",label:"人员名称",align:"center",width:"120px"}}),t("el-table-column",{attrs:{prop:"number",label:"人员编号",align:"center",width:"120px"}}),t("el-table-column",{attrs:{prop:"frameData.name",label:"所属组织",align:"center",width:"120px"}}),t("el-table-column",{attrs:{prop:"extension.sex",label:"人员性别",align:"center",width:"90px"}}),t("el-table-column",{attrs:{prop:"tel",label:"联系电话",align:"center",width:"120px"}}),t("el-table-column",{attrs:{prop:"add",label:"联系地址",align:"center",width:"160px"}}),t("el-table-column",{attrs:{prop:"card",label:"身份证号",align:"center",width:"160px"}}),t("el-table-column",{attrs:{prop:"data",label:"备注信息 ",align:"center",width:"200px"}}),t("el-table-column",{attrs:{prop:"set",label:"相关操作",align:"center",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button-group",[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.set(a.row.id)}}},[e._v("详情")]),e.$lib.getUserRoot(e.store.root,"senior","del")?[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.del([a.row.id])}}},[e._v("删除")])]:e._e()],2)]}}])})],1),t("el-pagination",{staticClass:"tablePagination",attrs:{"current-page":e.page.current,total:e.page.total,"page-size":e.page.size,"page-sizes":e.page.sizes,"pager-count":e.page.count,layout:"prev,pager,next,jumper,sizes,total"},on:{"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)},"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"size-change":function(t){return e.record(1)},"current-change":function(t){return e.record(0)}}}),t("el-dialog",{directives:[{name:"madeDialog",rawName:"v-madeDialog"}],staticClass:"tabsDialog",attrs:{visible:e.dialog.show,title:"详情",width:"700px"},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[t("transition",{attrs:{name:"el-fade-in"}},[e.dialog.show?[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"96px",inline:!0}},[t("el-tabs",{model:{value:e.dialog.active,callback:function(t){e.$set(e.dialog,"active",t)},expression:"dialog.active"}},[t("el-tab-pane",{attrs:{label:"基础资料",name:"base"}},[t("el-form-item",{attrs:{label:"人员名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入人员名称",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"人员编号",prop:"number"}},[t("el-input",{attrs:{placeholder:"请输入人员编号",clearable:""},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),t("el-form-item",{attrs:{label:"所属组织",prop:"frame"}},[t("nodTree",{attrs:{treeData:e.store.frame,placeholder:"请选择所属组织"},model:{value:e.form.frame,callback:function(t){e.$set(e.form,"frame",t)},expression:"form.frame"}})],1),t("el-form-item",{attrs:{label:"人员性别"}},[t("el-select",{attrs:{placeholder:"请选择人员性别"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[t("el-option",{attrs:{label:"女",value:0}}),t("el-option",{attrs:{label:"男",value:1}})],1)],1),t("el-form-item",{attrs:{label:"联系电话"}},[t("el-input",{attrs:{placeholder:"请输入联系电话",clearable:""},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),t("el-form-item",{attrs:{label:"联系地址"}},[t("el-input",{attrs:{placeholder:"请输入联系地址",clearable:""},model:{value:e.form.add,callback:function(t){e.$set(e.form,"add",t)},expression:"form.add"}})],1),t("el-form-item",{attrs:{label:"身份证号"}},[t("el-input",{attrs:{placeholder:"请输入身份证号",clearable:""},model:{value:e.form.card,callback:function(t){e.$set(e.form,"card",t)},expression:"form.card"}})],1),t("el-form-item",{attrs:{label:"备注信息"}},[t("el-input",{attrs:{placeholder:"请输入备注信息",clearable:""},model:{value:e.form.data,callback:function(t){e.$set(e.form,"data",t)},expression:"form.data"}})],1)],1),e.store.fields.hasOwnProperty(e.$route.name)?[t("el-tab-pane",{attrs:{label:"扩展信息",name:"more"}},[t("FieldForm",{attrs:{rule:"people",prefix:"more."},model:{value:e.form.more,callback:function(t){e.$set(e.form,"more",t)},expression:"form.more"}})],1)]:e._e()],2)],1)]:e._e()],2),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialog.show=!1}}},[e._v("取消")]),0==e.form.id||e.$lib.getUserRoot(e.store.root,"senior","edit")?[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])]:e._e()],2)],1),t("el-dialog",{directives:[{name:"madeDialog",rawName:"v-madeDialog"}],staticClass:"tabsDialog",attrs:{visible:e.batch.dialog,title:"批量",width:"420px"},on:{"update:visible":function(t){return e.$set(e.batch,"dialog",t)}}},[t("transition",{attrs:{name:"el-fade-in"}},[e.batch.dialog?[t("el-tabs",{model:{value:e.batch.active,callback:function(t){e.$set(e.batch,"active",t)},expression:"batch.active"}},[t("el-tab-pane",{attrs:{label:"导入数据",name:"import"}},[t("ul",{staticClass:"importTip"},[t("li",[e._v("1.该功能适用于批量导入数据。")]),t("li",[e._v("2.您需要下载数据模板后使用Excel录入数据。")]),t("li",[e._v("3.录入数据时，请勿修改首行数据标题以及排序。")]),t("li",[e._v("4.请查阅使用文档获取字段格式内容以及相关导入须知。")]),t("li",[e._v("5.点击下方上传模板，选择您编辑好的模板文件即可。")])]),t("el-divider"),t("el-row",{staticStyle:{"text-align":"center"}},[t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{type:"info"},on:{click:e.downTemplate}},[e._v("下载模板")])],1),t("el-col",{attrs:{span:12}},[t("el-upload",{attrs:{action:e.$base.web+"people/import",headers:{Token:e.$store.state.token},"show-file-list":!1,"on-success":e.importCall}},[t("el-button",{attrs:{type:"primary"}},[e._v("上传模板")])],1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"导出数据",name:"export"}},[t("div",{staticClass:"exportItem",on:{click:e.exports}},[t("i",{staticClass:"el-icon-download"}),t("p",[e._v("导出数据")])])])],1)]:e._e()],2)],1)],1)},s=[],o=a("b85c"),n=(a("14d9"),a("23f7")),i=a("5fb4"),l={name:"People",components:{NodTree:n["a"],FieldForm:i["a"]},data:function(){return{searchFrom:{name:"",number:"",sex:"",tel:"",add:"",card:"",data:""},tableData:[],tableSelection:[],page:{current:1,total:0,size:30,sizes:[30,60,90,150,300],count:5},dialog:{show:!1,active:"base"},form:{id:0,name:"",number:"",frame:null,sex:0,tel:"",add:"",card:"",data:"",more:{}},rules:{name:{required:!0,message:"请输入人员名称",trigger:"blur"},number:{required:!0,message:"请输入人员编号",trigger:"blur"},frame:{required:!0,message:"请选择所属组织",trigger:"change"}},batch:{dialog:!1,active:"import"}}},created:function(){this.record(1)},computed:{store:function(){return this.$store.state}},methods:{record:function(e){var t=this;0==e||(this.page.current=e);var a=Object.assign({page:this.page.current,limit:this.page.size},this.searchFrom);this.$axios.post("people/record",a).then((function(e){"success"==e.state?(t.tableData=e.info,t.page.total=e.count,t.$refs["searchPopover"].showPopper=!1):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},set:function(e){var t=this;this.form=this.$lib.extend(!0,{},this.$options.data().form),e>0?this.$axios.post("people/get",{id:e}).then((function(e){"success"==e.state?(t.form=e.info,t.dialog.show=!0):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})})):(this.form.frame=this.store.user.frame,this.dialog.show=!0)},save:function(){var e=this;this.$refs["form"].validate((function(t){t?e.$axios.post("people/save",e.form).then((function(t){"success"==t.state?(e.record(0),e.dialog.show=!1,e.$message({type:"success",message:"详情保存成功!"})):"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})})):e.$message({type:"warning",message:"表单验证错误,请检查并修正!"})}))},del:function(e){var t=this;this.$confirm("您确定要删除选中数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.post("people/del",{parm:e}).then((function(e){"success"==e.state?(t.record(0),t.$message({type:"success",message:"删除成功!"})):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))})).catch((function(){}))},downTemplate:function(){var e=this;this.$message({type:"success",message:"[ 数据模板 ] 下载请求中..."}),setTimeout((function(){window.open(e.store.base.cdnSite+"/erp/batch/人员导入模板.xlsx")}),1e3)},importCall:function(e,t,a){"success"==e.state?(this.$lib.updateStore(this),this.$bus.emit("homeReload",this.$options.name),this.$message({type:"success",message:e.info})):"error"==e.state?this.$message({type:"warning",message:"[ "+t.name+" ]"+e.info}):this.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})},exports:function(){var e=this;if(0==this.tableSelection.length)this.$message({type:"warning",message:"未选择导出数据内容!"});else{this.$message({type:"success",message:"[ 导出数据 ] 请求中..."});var t=this.$lib.objToParm({parm:this.tableSelection},!0);setTimeout((function(){window.open(e.$base.web+"people/exports?"+t)}),1e3)}},selectionChange:function(e){var t,a=[],r=Object(o["a"])(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;a.push(s.id)}}catch(n){r.e(n)}finally{r.f()}this.tableSelection=a},reload:function(){this.$bus.emit("homeReload",this.$options.name),this.$message({type:"success",message:"页面刷新成功!"})}}},c=l,u=(a("f7eb"),a("2877")),d=Object(u["a"])(c,r,s,!1,null,"75a025c2",null);t["default"]=d.exports},f7ea:function(e,t,a){"use strict";a("0b7c")},f7eb:function(e,t,a){"use strict";a("7384")},fbb4:function(e,t,a){"use strict";a("21fd")},ff98:function(e,t,a){"use strict";a("9019")}}]);