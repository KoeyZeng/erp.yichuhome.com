(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["c.d.f"],{"038e":function(e,t,a){},"09a0":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"inputGroup"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"input",staticClass:"batchInput ag-cell-edit-input",attrs:{type:"text"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),t("span",{staticClass:"bp",on:{click:e.showDialog}},[e._v("BP")]),e.dialog?t("Lot",{attrs:{condition:e.condition},on:{rowClick:e.rowClick,destroy:function(t){e.dialog=!1}}}):e._e()],1)},i=[],s=a("2b0e"),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"lot",on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation()}}},[t("el-dialog",{directives:[{name:"madeDialog",rawName:"v-madeDialog"}],attrs:{visible:e.dialog,title:"批次详情",width:"420px","append-to-body":!0},on:{"update:visible":function(t){e.dialog=t},closed:e.close}},[t("el-table",{directives:[{name:"madeTable",rawName:"v-madeTable"}],attrs:{data:e.tableData,height:"200px",size:"mini",border:""},on:{"row-click":e.rowClick}},[t("el-table-column",{attrs:{prop:"index",label:"#",type:"index",align:"center",width:"50px"}}),t("el-table-column",{attrs:{prop:"number",label:"批次号",align:"center","min-width":"150px"}}),t("el-table-column",{attrs:{prop:"time",label:"生产日期",align:"center","min-width":"90px"}}),t("el-table-column",{attrs:{prop:"nums",label:"库存数量",align:"center","min-width":"90px"}})],1),t("el-pagination",{staticClass:"tablePagination",attrs:{"current-page":e.page.current,total:e.page.total,"page-size":e.page.size,"page-sizes":e.page.sizes,"pager-count":e.page.count,layout:"prev,pager,next,total,slot"},on:{"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)},"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"size-change":function(t){return e.record(1)},"current-change":function(t){return e.record(0)}}},[t("el-popover",{ref:"searchPopover",staticClass:"batchSearch",attrs:{"popper-class":"batchPopover",placement:"top-end"}},[t("el-form",{ref:"searchFrom",staticClass:"searchFrom",attrs:{inline:""}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入批次号",clearable:""},model:{value:e.searchFrom.number,callback:function(t){e.$set(e.searchFrom,"number",t)},expression:"searchFrom.number"}})],1),t("el-form-item",[t("el-date-picker",{attrs:{placeholder:"请输入开始日期","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.searchFrom.startTime,callback:function(t){e.$set(e.searchFrom,"startTime",t)},expression:"searchFrom.startTime"}})],1),t("el-form-item",[t("el-date-picker",{attrs:{placeholder:"请输入结束日期","value-format":"yyyy-MM-dd",type:"date"},model:{value:e.searchFrom.endTime,callback:function(t){e.$set(e.searchFrom,"endTime",t)},expression:"searchFrom.endTime"}})],1),t("el-divider"),t("el-button",{staticClass:"searchBtn",attrs:{icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.record(1)}}})],1),t("el-button",{staticClass:"popoverBtn",attrs:{slot:"reference",icon:"el-icon-more",size:"mini"},slot:"reference"})],1)],1)],1)],1)},o=[],l={name:"Lot",props:{condition:{required:!0,type:Object}},data:function(){return{dialog:!0,searchFrom:{number:"",startTime:"",endTime:""},tableData:[],page:{current:1,total:0,size:30,sizes:[30,60,90,150,300],count:5}}},created:function(){this.record(1)},computed:{store:function(){return this.$store.state}},methods:{record:function(e){var t=this;0==e||(this.page.current=e);var a=Object.assign({page:this.page.current,limit:this.page.size},this.searchFrom,this.condition);this.$axios.post("service/getBatch",a).then((function(e){"success"==e.state?(t.tableData=e.info,t.page.total=e.count):"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},rowClick:function(e){this.dialog=!1,this.$emit("rowClick",e)},close:function(){this.$emit("destroy",!0)}}},c=l,u=(a("b63f"),a("a7b9"),a("2877")),d=Object(u["a"])(c,r,o,!1,null,"0371f4ec",null),p=d.exports,h=s["default"].extend({name:"Batch",components:{Lot:p},data:function(){return{value:"",dialog:!1,condition:{}}},created:function(){this.value=this.params.value},computed:{hasBatch:function(){var e=this.params.node.data;return!(!e.hasOwnProperty("batchType")||!e.batchType)}},methods:{showDialog:function(){var e=this.params.node.data;null==e.warehouseId?this.$message({type:"warning",message:"请先选择仓库信息"}):(this.condition={goods:e.key,attr:e.attr,warehouse:e.warehouseId},this.dialog=!0)},rowClick:function(e){this.value=e.number,null!=e.time&&(this.params.node.data.mfd=e.time),this.$el.parentNode.focus(),this.params.api.stopEditing()},getValue:function(){return this.value},isCancelBeforeStart:function(){return!this.hasBatch}},mounted:function(){var e=this;this.hasBatch&&this.$nextTick((function(){e.$refs.input.focus(),e.$refs.input.select()}))}}),f=h,m=(a("4579"),Object(u["a"])(f,n,i,!1,null,"3267736e",null));t["a"]=m.exports},"11dd":function(e,t,a){"use strict";a("6f1a")},1276:function(e,t,a){"use strict";var n=a("c65b"),i=a("e330"),s=a("d784"),r=a("825a"),o=a("861d"),l=a("1d80"),c=a("4840"),u=a("8aa5"),d=a("50c4"),p=a("577e"),h=a("dc4a"),f=a("14c3"),m=a("9f7f"),g=a("d039"),v=m.UNSUPPORTED_Y,b=4294967295,y=Math.min,k=i([].push),w=i("".slice),x=!g((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]})),$="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length;s("split",(function(e,t,a){var i="0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:n(t,this,e,a)}:t;return[function(t,a){var s=l(this),r=o(t)?h(t,e):void 0;return r?n(r,t,s,a):n(i,p(s),t,a)},function(e,n){var s=r(this),o=p(e);if(!$){var l=a(i,s,o,n,i!==t);if(l.done)return l.value}var h=c(s,RegExp),m=s.unicode,g=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(v?"g":"y"),x=new h(v?"^(?:"+s.source+")":s,g),_=void 0===n?b:n>>>0;if(0===_)return[];if(0===o.length)return null===f(x,o)?[o]:[];var C=0,P=0,D=[];while(P<o.length){x.lastIndex=v?0:P;var O,S=f(x,v?w(o,P):o);if(null===S||(O=y(d(x.lastIndex+(v?P:0)),o.length))===C)P=u(o,P,m);else{if(k(D,w(o,C,P)),D.length===_)return D;for(var T=1;T<=S.length-1;T++)if(k(D,S[T]),D.length===_)return D;P=C=O}}return k(D,w(o,C)),D}]}),$||!x,v)},"1d84":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"goodsList"},[t("el-dialog",{directives:[{name:"madeDialog",rawName:"v-madeDialog"}],attrs:{visible:e.dialog,title:"商品列表",width:"720px","append-to-body":!0},on:{"update:visible":function(t){e.dialog=t},closed:e.close}},[t("el-table",{directives:[{name:"madeTable",rawName:"v-madeTable"}],ref:"dataTable",staticClass:"dataTable gridTable",attrs:{height:"300px",data:e.tableData,indent:0,"tree-props":{children:"attr"},"header-row-class-name":"dataTableHeader","row-key":"key",size:"mini",border:""},on:{"row-click":e.rowClick}},[t("el-table-column",{attrs:{type:"selection",align:"center",width:"39px",fixed:"left"}}),t("el-table-column",{attrs:{prop:"name",label:"商品名称",align:"center",width:"160px",fixed:"left"}}),t("el-table-column",{attrs:{prop:"number",label:"商品编号",align:"center",width:"120px"}}),t("el-table-column",{attrs:{prop:"spec",label:"规格型号",align:"center",width:"120px"}}),t("el-table-column",{attrs:{prop:"categoryData.name",label:"商品分类",align:"center",width:"120px"}}),t("el-table-column",{attrs:{prop:"brand",label:"商品品牌",align:"center",width:"120px"}}),t("el-table-column",{attrs:{prop:"extension.unit",label:"商品单位",align:"center",width:"90px"}}),t("el-table-column",{attrs:{prop:"buy",label:"采购价格",align:"center",width:"90px"}}),t("el-table-column",{attrs:{prop:"sell",label:"销售价格",align:"center",width:"90px"}}),t("el-table-column",{attrs:{prop:"code",label:"商品条码",align:"center",width:"120px"}}),t("el-table-column",{attrs:{prop:"data",label:"备注信息 ",align:"center","min-width":"120px"}}),t("el-table-column",{attrs:{prop:"nums",align:"center",width:"50px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.hasOwnProperty("pid")||0==a.row.attr.length?[t("input",{directives:[{name:"model",rawName:"v-model",value:a.row.nums,expression:"scope.row.nums"}],attrs:{type:"text"},domProps:{value:a.row.nums},on:{input:[function(t){t.target.composing||e.$set(a.row,"nums",t.target.value)},function(t){return e.numsChange(a.row)}]}})]:[t("span",[e._v("-")])]]}}])},[t("template",{slot:"header"},[t("i",{staticClass:"el-icon-edit-outline"})])],2)],1),t("el-pagination",{staticClass:"tablePagination",attrs:{"current-page":e.page.current,total:e.page.total,"page-size":e.page.size,"page-sizes":e.page.sizes,"pager-count":e.page.count,layout:"prev,pager,next,jumper,sizes,total"},on:{"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)},"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"size-change":function(t){return e.record(1)},"current-change":function(t){return e.record(0)}}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-popover",{ref:"searchPopover",attrs:{"popper-class":"searchPopover",placement:"top-start"}},[t("el-form",{ref:"searchFrom",staticClass:"searchFrom",attrs:{inline:""}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"名称 | 编号 | 型号",clearable:""},model:{value:e.searchFrom.mate,callback:function(t){e.$set(e.searchFrom,"mate",t)},expression:"searchFrom.mate"}})],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入商品条码",clearable:""},model:{value:e.searchFrom.code,callback:function(t){e.$set(e.searchFrom,"code",t)},expression:"searchFrom.code"}})],1),t("el-form-item",[t("nodTree",{attrs:{treeData:e.store.category,placeholder:"请选择商品类别"},model:{value:e.searchFrom.category,callback:function(t){e.$set(e.searchFrom,"category",t)},expression:"searchFrom.category"}})],1),t("el-form-item",[t("el-select",{attrs:{placeholder:"请选择商品品牌",clearable:""},model:{value:e.searchFrom.brand,callback:function(t){e.$set(e.searchFrom,"brand",t)},expression:"searchFrom.brand"}},[e._l(e.store.sys.brand,(function(e){return[t("el-option",{attrs:{label:e,value:e}})]}))],2)],1),t("el-form-item",[t("el-select",{attrs:{placeholder:"请选择商品类型",clearable:""},model:{value:e.searchFrom.type,callback:function(t){e.$set(e.searchFrom,"type",t)},expression:"searchFrom.type"}},[t("el-option",{attrs:{label:"常规商品",value:1}}),t("el-option",{attrs:{label:"服务商品",value:2}})],1)],1),t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入备注信息",clearable:""},model:{value:e.searchFrom.data,callback:function(t){e.$set(e.searchFrom,"data",t)},expression:"searchFrom.data"}})],1),t("el-divider"),t("el-button",{staticClass:"searchBtn",attrs:{icon:"el-icon-search"},on:{click:function(t){return e.record(1)}}})],1),t("el-button",{attrs:{slot:"reference",icon:"el-icon-more"},slot:"reference"})],1),t("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.choice}},[e._v("选择")]),t("el-button",{attrs:{type:"success"},on:{click:function(t){return e.switchPage("goods")}}},[e._v("新增商品")])],1)],1)],1)},i=[],s=a("b85c"),r=(a("7db0"),a("14d9"),a("b0c0"),a("e9f5"),a("f665"),a("d3b7"),a("23f7")),o={name:"GoodsList",components:{NodTree:r["a"]},props:{parm:{required:!0,type:Object}},data:function(){return{dialog:!0,tableData:[],page:{current:1,total:0,size:30,sizes:[30,60,90,150,300],count:5},searchFrom:{mate:"",code:"",category:null,brand:"",type:"",data:""}}},created:function(){this.searchFrom=Object.assign({},this.searchFrom,this.parm),this.record(1)},computed:{store:function(){return this.$store.state}},methods:{switchPage:function(e){this.$bus.emit("switchPage",e,!0),this.dialog=!1},record:function(e){var t=this;0==e||(this.page.current=e);var a=Object.assign({page:this.page.current,limit:this.page.size},this.searchFrom);this.$axios.post("service/goodsRecord",a).then((function(e){if("success"==e.state){var a,n=Object(s["a"])(e.info);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(i.nums="",i.attr.length>0){var r,o=Object(s["a"])(i.attr);try{for(o.s();!(r=o.n()).done;){var l=r.value;l.nums=""}}catch(c){o.e(c)}finally{o.f()}}}}catch(c){n.e(c)}finally{n.f()}t.tableData=e.info,t.page.total=e.count,t.$refs["searchPopover"].showPopper=!1}else"error"==e.state?t.$message({type:"warning",message:e.info}):t.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},numsChange:function(e){this.$lib.validate("empty",e.nums)?this.$refs.dataTable.toggleRowSelection(e,!1):this.$refs.dataTable.toggleRowSelection(e,!0)},choice:function(){var e=this,t=this.$refs.dataTable.selection;if(t.length>0){var a,n=[],i=Object(s["a"])(t);try{var r,o=function(){var t,i=a.value;if(t=i.hasOwnProperty("pid")?e.$lib.extend(!0,{},e.tableData.find((function(e){return e.id==i.pid})),{attr:i.name,buy:i.buy,sell:i.sell,retail:i.retail,code:i.code,nums:i.nums}):e.$lib.extend(!0,{},i,{attr:""}),e.$lib.validate("empty",t.nums))t.nums=1;else if(!e.$lib.synValidate("nums",t.nums))return e.$message({type:"warning",message:"商品[ "+t.name+(""==t.attr?"":" | "+t.attr)+" ]数量不正确!"}),{v:!1};n.push(t)};for(i.s();!(a=i.n()).done;)if(r=o(),r)return r.v}catch(l){i.e(l)}finally{i.f()}this.dialog=!1,this.$emit("choice",n)}else this.$message({type:"warning",message:"您还未选择商品数据!"})},rowClick:function(e){e.hasOwnProperty("pid")?this.$refs.dataTable.toggleRowSelection(e):e.attr.length>0?this.$refs.dataTable.toggleRowExpansion(e):this.$refs.dataTable.toggleRowSelection(e)},close:function(){this.$emit("destroy",!0)}}},l=o,c=(a("e2c6"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,"46cea92b",null);t["a"]=u.exports},"23f7":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("el-popover",{ref:"nodTree",staticClass:"nodTree"},[t("el-input",{attrs:{slot:"reference",placeholder:e.placeholder,readonly:""},nativeOn:{keydown:function(t){return e.inputEvent.apply(null,arguments)}},slot:"reference",model:{value:e.label,callback:function(t){e.label=t},expression:"label"}},[t("template",{slot:"suffix"},[t("i",{class:["el-input__icon",""!=e.label?"el-icon-circle-close":"el-icon-arrow-down"],on:{click:function(t){return t.stopPropagation(),e.delModel.apply(null,arguments)}}})])],2),t("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.treeProps,"node-key":e.treeKey,"current-node-key":e.checked,"show-checkbox":e.checkbox,"check-strictly":e.checkStrictly,"default-checked-keys":e.checkeds,"default-expanded-keys":e.expanded,"highlight-current":!0},on:{check:e.setTree,"node-click":e.setTree}})],1)},i=[],s=a("b85c"),r=(a("7db0"),a("a15b"),a("14d9"),a("b0c0"),a("e9f5"),a("f665"),a("d3b7"),{name:"NodTree",props:{value:{required:!0},treeData:{required:!0,type:Array},treeKey:{default:"id"},treeProps:{default:function(){return{label:"name",children:"sub"}}},placeholder:{default:"请点击选择数据"},checkStrictly:{default:!1}},data:function(){return{label:"",checked:null,checkeds:[],expanded:[],checkbox:!1}},created:function(){this.init()},computed:{flatTree:function(){var e=this.$lib.flatten(this.treeData);return e}},watch:{value:{handler:function(e){this.checkbox?this.$lib.comparison(e,this.checkeds)&&(this.checkeds=e,this.$refs.tree.setCheckedKeys(e,!0)):e!=this.checked&&(this.checked=e,this.$refs.tree.setCurrentKey(e))},deep:!0},checked:function(){this.setInput()},checkeds:{handler:function(){this.setInput()},deep:!0}},methods:{init:function(){var e=this;if(null!=this.value){Array.isArray(this.value)?(this.checkbox=!0,this.checkeds=this.value):(this.checkbox=!1,this.checked=this.value);var t,a=Object(s["a"])(this.checkbox?this.checkeds:[this.checked]);try{var n=function(){var a=t.value,n=e.flatTree.find((function(e){return e.id==a}));void 0!=n&&n.hasOwnProperty("pid")&&e.expanded.push(n.pid)};for(a.s();!(t=a.n()).done;)n()}catch(i){a.e(i)}finally{a.f()}}},setInput:function(){var e,t=this,a=[],n=Object(s["a"])(this.checkbox?this.checkeds:[this.checked]);try{var i=function(){var n=e.value,i=t.flatTree.find((function(e){return e.id==n}));void 0==i||a.push(i.name)};for(n.s();!(e=n.n()).done;)i()}catch(r){n.e(r)}finally{n.f()}this.label=a.join(",")},setTree:function(e){this.checkbox?(this.checkeds=this.$refs.tree.getCheckedKeys(),this.$emit("input",this.checkeds)):(this.checked=e.id,this.$emit("input",this.checked),this.$refs["nodTree"].showPopper=!1)},delModel:function(){this.label="",this.checkbox?(this.checkeds=[],this.$refs.tree.setCheckedKeys([])):(this.checked=null,this.$refs.tree.setCurrentKey(null)),this.$emit("input",this.checkbox?[]:null),this.$refs["nodTree"].showPopper=!1},inputEvent:function(e){this.$refs["nodTree"].showPopper&&27==e.keyCode&&e.stopPropagation()}}}),o=r,l=(a("d683"),a("2877")),c=Object(l["a"])(o,n,i,!1,null,"9f20837e",null);t["a"]=c.exports},"2d24":function(e,t,a){"use strict";a("b10f")},"2ff6":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"input",staticClass:"ag-cell-edit-input",attrs:{type:"text"},domProps:{value:e.value},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.quickEnter.apply(null,arguments)},input:function(t){t.target.composing||(e.value=t.target.value)}}})},i=[],s=a("2b0e"),r=s["default"].extend({name:"QuickInput",data:function(){return{value:""}},computed:{hasKey:function(){return null!=this.params.node.data.key}},methods:{getValue:function(){return""},quickEnter:function(){this.$parent.$emit("quickEnter",this.value,this.params.rowIndex)},isCancelBeforeStart:function(){return this.hasKey}},mounted:function(){var e=this;this.hasKey||this.$nextTick((function(){e.$refs.input.focus()}))}}),o=r,l=a("2877"),c=Object(l["a"])(o,n,i,!1,null,null,null);t["a"]=c.exports},"3d34":function(e,t,a){},4579:function(e,t,a){"use strict";a("ea31")},"4a41":function(e,t,a){},"52f2":function(e,t,a){},"533f":function(e,t,a){},"5a8a":function(e,t,a){"use strict";a("b0c0");var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"storehouse",attrs:{tabindex:"-1"},on:{keydown:function(t){return t.stopPropagation(),t.preventDefault(),e.storehouseEvent.apply(null,arguments)}}},[t("el-popover",{ref:"popover",attrs:{"popper-class":"agGridSelect",trigger:"manual"}},[t("p",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.value))]),t("ul",{staticClass:"list"},[e._l(e.list,(function(a,n){return[t("li",{class:{hover:n==e.hover},on:{click:function(t){return e.choice(a)}}},[e._v(e._s(a.name))])]}))],2)])],1)},i=[],s=(a("c740"),a("2b0e")),r=s["default"].extend({name:"Storehouse",data:function(){return{value:null,list:[],hover:0}},created:function(){var e=this;if(this.hasData){this.value=this.params.node.data[this.params.dispose.text],this.list=this.store.warehouse;var t=this.list.findIndex((function(t){return t.name==e.value}));-1==t||(this.hover=t)}},computed:{store:function(){return this.$store.state},hasData:function(){var e=this.params.node.data;return null!=e.key&&0==e.goodsType}},methods:{choice:function(e){this.value=e.name,this.params.node.data[this.params.dispose.key]=e.id,this.$el.parentNode.focus(),this.params.api.stopEditing()},storehouseEvent:function(e){var t=e.keyCode;13==t?this.choice(this.list[this.hover]):27==t?(this.$el.parentNode.focus(),this.params.api.stopEditing()):38==t?this.list.hasOwnProperty(this.hover-1)&&this.hover--:40==t&&this.list.hasOwnProperty(this.hover+1)&&this.hover++},getValue:function(){return this.value},isCancelBeforeStart:function(){return!this.hasData}},mounted:function(){var e=this;this.hasData&&this.$nextTick((function(){e.$el.focus(),e.$refs.popover.showPopper=!0}))}}),o=r,l=(a("11dd"),a("2877")),c=Object(l["a"])(o,n,i,!1,null,"78e55264",null);t["a"]=c.exports},"60f6":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"scheme"},[t("div",{staticClass:"title"},[t("span",[e._v(e._s(e.title))]),t("el-tooltip",{attrs:{placement:"top",effect:"light",content:e.state?"扫码模式":"常规模式"}},[t("el-switch",{attrs:{width:24},on:{change:e.change},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1)],1)])},i=[],s=a("2b0e"),r=s["default"].extend({name:"Scheme",data:function(){return{title:"",state:!1}},created:function(){this.title=this.params.dispose.title},methods:{change:function(){this.$parent.$emit("schemeChange",this.state)}}}),o=r,l=(a("a28f"),a("2877")),c=Object(l["a"])(o,n,i,!1,null,"18ff6599",null);t["a"]=c.exports},6763:function(e,t,a){"use strict";a("a62b")},"6b69":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-date-picker",{ref:"datePicker",attrs:{type:"date",editable:!1,clearable:!1,"value-format":"yyyy-MM-dd",placeholder:"点击选择"},on:{change:e.change},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})},i=[],s=a("2b0e"),r=s["default"].extend({name:"Validity",data:function(){return{value:""}},created:function(){this.value=this.params.value},computed:{hasData:function(){var e=this.params.node.data;return!(!e.hasOwnProperty("validityType")||!e.validityType)}},methods:{change:function(){this.params.api.stopEditing()},getValue:function(){return this.value},isCancelBeforeStart:function(){return!this.hasData}},mounted:function(){this.hasData&&(this.$refs.datePicker.pickerVisible=!0)}}),o=r,l=(a("2d24"),a("2877")),c=Object(l["a"])(o,n,i,!1,null,"2e40e204",null);t["a"]=c.exports},"6f1a":function(e,t,a){},7649:function(e,t,a){},8498:function(e,t,a){},"90ed":function(e,t,a){"use strict";a("ad21")},"94ab":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"inputGroup"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"input",staticClass:"ag-cell-edit-input",attrs:{type:"text",disabled:e.hasSerial},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),e.hasSerial?t("span",{staticClass:"sn",on:{click:e.showDialog}},[e._v("SN")]):e._e(),e.dialog?t("Snu",{attrs:{config:e.config},on:{save:e.saveSnu,destroy:function(t){e.dialog=!1}}}):e._e()],1)},i=[],s=a("2b0e"),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"stock"},[t("el-dialog",{directives:[{name:"madeDialog",rawName:"v-madeDialog"}],attrs:{visible:e.dialog,title:"序列号",width:"460px","append-to-body":!0},on:{"update:visible":function(t){e.dialog=t},closed:e.close}},[t("el-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[t("el-tab-pane",{attrs:{label:"常规录入",name:"base"}},[t("el-input",{attrs:{placeholder:"扫码录入或手动录入",clearable:""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSerial.apply(null,arguments)}},model:{value:e.source.serial,callback:function(t){e.$set(e.source,"serial",t)},expression:"source.serial"}},[t("template",{slot:"append"},[t("span",{on:{click:e.addSerial}},[e._v("添加")])])],2)],1),e.config.record.show?t("el-tab-pane",{attrs:{label:"选择录入",name:"choice"}},[t("el-table",{directives:[{name:"madeTable",rawName:"v-madeTable"}],ref:"recordTable",attrs:{data:e.source.record.data,height:"150px",size:"mini",border:""},on:{"row-click":e.rowClick,"selection-change":e.selectionChange}},[t("el-table-column",{attrs:{type:"selection",align:"center",width:"39px"}}),t("el-table-column",{attrs:{prop:"number",label:"序列号",align:"center","min-width":"160px"}}),t("el-table-column",{attrs:{prop:"extension.state",label:"状态",align:"center","min-width":"90px"}})],1),t("el-pagination",{staticClass:"tablePagination",attrs:{"current-page":e.source.record.page.current,total:e.source.record.page.total,"page-size":e.source.record.page.size,"page-sizes":e.source.record.page.sizes,"pager-count":e.source.record.page.count,layout:"prev,pager,next,total,slot"},on:{"update:currentPage":function(t){return e.$set(e.source.record.page,"current",t)},"update:current-page":function(t){return e.$set(e.source.record.page,"current",t)},"update:pageSize":function(t){return e.$set(e.source.record.page,"size",t)},"update:page-size":function(t){return e.$set(e.source.record.page,"size",t)},"current-change":e.getSerial}},[t("el-button",{staticClass:"choiceBtn",attrs:{type:"info"},on:{click:e.addChoice}},[e._v("添加选中")])],1)],1):e._e(),t("el-tab-pane",{attrs:{label:"批量录入",name:"batch"}},[t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"扫码录入或手动录入|每行一条"},model:{value:e.source.serials,callback:function(t){e.$set(e.source,"serials",t)},expression:"source.serials"}}),t("el-button",{staticClass:"rowBtn",attrs:{type:"info"},on:{click:e.addSerials}},[e._v("批量添加")])],1),t("el-tab-pane",{attrs:{label:"自动生成",name:"auto"}},[t("el-form",{attrs:{inline:!0}},[t("el-row",{attrs:{gutter:9}},[t("el-col",{attrs:{span:9}},[t("el-form-item",{attrs:{label:"前缀文本"}},[t("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.source.auto.text,callback:function(t){e.$set(e.source.auto,"text",t)},expression:"source.auto.text"}})],1)],1),t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{label:"起始号码"}},[t("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.source.auto.start,callback:function(t){e.$set(e.source.auto,"start",e._n(t))},expression:"source.auto.start"}})],1)],1),t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{label:"递增数量"}},[t("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.source.auto.plus,callback:function(t){e.$set(e.source.auto,"plus",e._n(t))},expression:"source.auto.plus"}})],1)],1),t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{label:"生成数量"}},[t("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.source.auto.count,callback:function(t){e.$set(e.source.auto,"count",e._n(t))},expression:"source.auto.count"}})],1)],1)],1)],1),t("el-button",{staticClass:"rowBtn",attrs:{type:"info"},on:{click:e.addAuto}},[e._v("批量生成")])],1)],1),t("el-divider"),t("el-table",{attrs:{data:e.tableData,height:"150px",size:"mini",border:""}},[t("el-table-column",{attrs:{prop:"index",label:"#",type:"index",align:"center",width:"50px"}}),t("el-table-column",{attrs:{prop:"serial",label:"序列号",align:"center","min-width":"120px"}}),t("el-table-column",{attrs:{prop:"set",label:"操作",align:"center",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.delSerial(a.$index)}}})]}}])},[t("template",{slot:"header"},[t("i",{staticClass:"el-icon-delete",on:{click:e.clearSerial}})])],2)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},o=[],l=a("b85c"),c=(a("4de4"),a("d81d"),a("14d9"),a("a434"),a("e9f5"),a("910d"),a("ab43"),a("d3b7"),a("ac1f"),a("1276"),{name:"Snu",props:{config:{required:!0,type:Object}},data:function(){return{dialog:!0,active:"base",source:{serial:"",serials:"",record:{data:[],selection:[],page:{current:1,total:0,size:30,sizes:[30,60,90,150,300],count:5}},auto:{text:"SN",start:1,plus:1,count:1}},tableData:[]}},created:function(){this.config.record.show&&this.getSerial(),this.tableData=this.config.source.map((function(e){return{serial:e}}))},methods:{addSerial:function(){this.$lib.validate("empty",this.source.serial)?this.$message({type:"warning",message:"录入内容不可为空!"}):(this.tableData.push({serial:this.source.serial}),this.source.serial="")},addSerials:function(){var e=this,t=this.source.serials.split(/[(\r\n)\r\n]+/).filter((function(t){return!e.$lib.validate("empty",t)}));if(t.length>0){var a,n=Object(l["a"])(t);try{for(n.s();!(a=n.n()).done;){var i=a.value;this.tableData.push({serial:i})}}catch(s){n.e(s)}finally{n.f()}this.source.serials=""}else this.$message({type:"warning",message:"批量录入内容不可为空!"})},getSerial:function(){var e=this,t=Object.assign({page:this.source.record.page.current,limit:this.source.record.page.size},this.config.condition,this.config.record.parm);this.$axios.post("service/getSerial",t).then((function(t){"success"==t.state?(e.source.record.data=t.info,e.source.record.page.total=t.count):"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},rowClick:function(e){this.$refs.recordTable.toggleRowSelection(e)},selectionChange:function(e){var t,a=[],n=Object(l["a"])(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;a.push(i.number)}}catch(s){n.e(s)}finally{n.f()}this.source.record.selection=a},addChoice:function(){var e=this.source.record.selection;if(e.length>0){var t,a=Object(l["a"])(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;this.tableData.push({serial:n})}}catch(i){a.e(i)}finally{a.f()}this.$refs.recordTable.clearSelection()}else this.$message({type:"warning",message:"您还未选择数据!"})},addAuto:function(){if(this.$lib.validate("integer",this.source.auto.start))if(this.$lib.validate("integer",this.source.auto.plus))if(this.$lib.validate("integer",this.source.auto.count))for(var e=0;e<this.source.auto.count;e++){var t=this.$calc.chain(this.source.auto.plus).multiply(e).done(),a=this.$calc.chain(this.source.auto.start).add(t).done();this.tableData.push({serial:this.source.auto.text+a})}else this.$message({type:"warning",message:"生成数量不正确!"});else this.$message({type:"warning",message:"递增数量不正确!"});else this.$message({type:"warning",message:"起始号码不正确!"})},delSerial:function(e){this.tableData.splice(e,1)},clearSerial:function(){this.tableData=[]},save:function(){if(this.tableData.length>0){for(var e=this.tableData.map((function(e){return e.serial})),t=0;t<e.length;t++)if(!this.$lib.validate("serial",e[t]))return this.$message({type:"warning",message:"序列号第"+(t+1)+"条不符合规则!"}),!1;this.$lib.distinct(e).length==e.length?(this.$emit("save",e),this.dialog=!1):this.$message({type:"warning",message:"序列号重复,请核实!"})}else this.$message({type:"warning",message:"序列号不可为空!"})},close:function(){this.$emit("destroy",!0)}}}),u=c,d=(a("dfaa"),a("2877")),p=Object(d["a"])(u,r,o,!1,null,"3c8e0954",null),h=p.exports,f=s["default"].extend({name:"Serial",components:{Snu:h},data:function(){return{value:"",dialog:!1,config:{}}},created:function(){this.value=this.params.value},computed:{hasSerial:function(){var e=this.params.node.data;return!(!e.hasOwnProperty("serialType")||!e.serialType)},hasRecord:function(){return this.params.dispose.record.show}},methods:{showDialog:function(){var e=this.params.node.data;null==e.warehouseId?this.$message({type:"warning",message:"请先选择仓库信息"}):e.batchType&&""==e.batch?this.$message({type:"warning",message:"请先选择批次信息"}):e.validityType&&""==e.mfd?this.$message({type:"warning",message:"请先选择生产日期"}):(this.config={record:this.params.dispose.record,source:e.serial,condition:{warehouse:e.warehouseId,goods:e.key,attr:e.attr,batch:e.batch,mfd:e.mfd}},this.dialog=!0)},saveSnu:function(e){var t=this.params.node.data;t.unitData.length>0?this.value=this.$calc.chain(e.length).divide(t.unitRelation.multiple).done():this.value=e.length,t.serial=e,this.params.api.stopEditing()},getValue:function(){return this.value}},mounted:function(){var e=this;this.hasSerial||this.$nextTick((function(){e.$refs.input.focus(),e.$refs.input.select()}))}}),m=f,g=(a("c548"),Object(d["a"])(m,n,i,!1,null,"48964970",null));t["a"]=g.exports},a28f:function(e,t,a){"use strict";a("7649")},a62b:function(e,t,a){},a7b9:function(e,t,a){"use strict";a("3d34")},aac3:function(e,t,a){"use strict";a("b0c0");var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"company",attrs:{tabindex:"-1"},on:{keydown:function(t){return t.stopPropagation(),t.preventDefault(),e.companyEvent.apply(null,arguments)}}},[t("el-popover",{ref:"popover",attrs:{"popper-class":"agGridSelect",trigger:"manual"}},[t("p",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.value))]),t("ul",{staticClass:"list"},[e._l(e.list,(function(a,n){return[t("li",{class:{hover:n==e.hover},on:{click:function(t){return e.choice(a.name)}}},[e._v(e._s(a.name))])]}))],2)])],1)},i=[],s=(a("99af"),a("c740"),a("2b0e")),r=s["default"].extend({name:"Company",data:function(){return{value:null,list:[],hover:0}},created:function(){var e=this;if(this.hasData){this.value=this.params.value;var t=this.params.node.data.unitData;this.list=[{name:t[0].source}].concat(t);var a=this.list.findIndex((function(t){return t.name==e.value}));-1==a||(this.hover=a)}},computed:{hasData:function(){var e=this.params.node.data;return null!=e.key&&e.unitData.length>0}},methods:{choice:function(e){this.value=e;var t=this.params.node.data,a=this.$lib.unitRelation(this.value,t.unitData,this),n=this.$calc.chain(t.unitRelation.valence).multiply(a.multiple).multiply(a.discount).round(this.$store.state.sys.fun.digit.money).done();t.unitRelation.multiple=a.multiple,this.$grid.updateGridData(this.params,t.uniqid,"price",n),t.unitData.length>0&&t.hasOwnProperty("serial")&&t.serial.length>0&&this.$grid.updateGridData(this.params,t.uniqid,"nums",this.$calc.chain(t.serial.length).divide(a.multiple).done()),this.$el.parentNode.focus(),this.params.api.stopEditing()},companyEvent:function(e){var t=e.keyCode;13==t?this.choice(this.list[this.hover].name):27==t?(this.$el.parentNode.focus(),this.params.api.stopEditing()):38==t?this.list.hasOwnProperty(this.hover-1)&&this.hover--:40==t&&this.list.hasOwnProperty(this.hover+1)&&this.hover++},getValue:function(){return this.value},isCancelBeforeStart:function(){return!this.hasData}},mounted:function(){var e=this;this.hasData&&this.$nextTick((function(){e.$el.focus(),e.$refs.popover.showPopper=!0}))}}),o=r,l=(a("ab3b"),a("2877")),c=Object(l["a"])(o,n,i,!1,null,"6cf6c9cc",null);t["a"]=c.exports},ab3b:function(e,t,a){"use strict";a("52f2")},ad21:function(e,t,a){},ade3:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("53ca");a("8172"),a("d9e2"),a("efec"),a("a9e3");function i(e,t){if("object"!=Object(n["a"])(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=Object(n["a"])(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(e){var t=i(e,"string");return"symbol"==Object(n["a"])(t)?t:t+""}function r(e,t,a){return(t=s(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},b10f:function(e,t,a){},b232:function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"depot"},[e.hasData?t("i",{staticClass:"search el-icon-search",on:{click:function(t){t.stopPropagation(),e.dialog=!0}}}):e._e(),t("span",{staticClass:"agGridPopup"},[e._v(e._s(e.value))]),e.dialog?t("Stock",{attrs:{condition:e.condition},on:{rowClick:e.rowClick,destroy:function(t){e.dialog=!1}}}):e._e()],1)},i=[],s=(a("b0c0"),a("2b0e")),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"stock"},[t("el-dialog",{directives:[{name:"madeDialog",rawName:"v-madeDialog"}],attrs:{visible:e.dialog,title:"库存详情",width:"320px","append-to-body":!0},on:{"update:visible":function(t){e.dialog=t},closed:e.close}},[t("el-table",{attrs:{data:e.tableData,height:"220px",size:"mini",border:""},on:{"row-click":e.rowClick}},[t("el-table-column",{attrs:{prop:"name",label:"仓库名称",align:"center","min-width":"160px"}}),t("el-table-column",{attrs:{prop:"nums",label:"库存数量",align:"center","min-width":"120px"}})],1),t("el-pagination",{staticClass:"tablePagination",attrs:{"current-page":e.page.current,total:e.page.total,"page-size":e.page.size,"page-sizes":e.page.sizes,"pager-count":e.page.count,layout:"prev,pager,next"},on:{"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)},"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"current-change":e.record}})],1)],1)},o=[],l={name:"Stock",props:{condition:{required:!0,type:Object}},data:function(){return{dialog:!0,tableData:[],page:{current:1,total:0,size:5,sizes:[5,10,15,20,30],count:5}}},created:function(){this.record()},methods:{record:function(){var e=this,t=Object.assign({page:this.page.current,limit:this.page.size},this.condition);this.$axios.post("service/goodsDepot",t).then((function(t){"success"==t.state?(e.tableData=t.info,e.page.total=t.count):"error"==t.state?e.$message({type:"warning",message:t.info}):e.$message({type:"error",message:"[ ERROR ] 服务器响应超时!"})}))},rowClick:function(e){this.dialog=!1,this.$emit("rowClick",e)},close:function(){this.$emit("destroy",!0)}}},c=l,u=a("2877"),d=Object(u["a"])(c,r,o,!1,null,null,null),p=d.exports,h=s["default"].extend({name:"Depot",components:{Stock:p},data:function(){return{value:"",dialog:!1,condition:{}}},created:function(){if(this.hasData){this.value=this.params.value;var e=this.params.node.data;this.condition={goods:e.key,attr:e.attr}}},computed:{hasData:function(){var e=this.params.node.data;return null!=e.key&&0==e.goodsType}},methods:{rowClick:function(e){var t=this.params.node.data,a=this.params.dispose,n=this.$el.parentNode.getAttribute("comp-id");t[a.key]=e.warehouse,this.$grid.updateGridData(this.params,t.uniqid,a.text,e.name),document.querySelector(".ag-cell[comp-id='"+n+"']").focus()}}}),f=h,m=(a("90ed"),Object(u["a"])(f,n,i,!1,null,"0622bc21",null));t["a"]=m.exports},b63f:function(e,t,a){"use strict";a("c135")},b8a6:function(e,t,a){"use strict";a("b0c0");var n=function(){var e=this,t=e._self._c;return t("el-input",{class:["logistics",{moreIco:e.more.length>0}],attrs:{placeholder:e.placeholder},on:{input:e.inputChange},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}},[t("template",{slot:"prefix"},[t("el-dropdown",{attrs:{placement:"top",trigger:"click"},on:{command:e.command}},[t("span",{staticClass:"el-dropdown-link"},[t("el-tooltip",{attrs:{placement:"bottom",effect:"light"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.mold.name))]),t("i",{staticClass:"el-icon-truck"})])],1),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e._l(e.lists,(function(a){return[t("el-dropdown-item",{attrs:{command:a.key}},[e._v(e._s(a.name))])]}))],2)],1)],1),t("template",{slot:"suffix"},[t("div",{staticClass:"icoGroup"},[t("i",{staticClass:"el-icon-link",on:{click:e.openLink}}),e.more.length>0?[t("el-divider",{attrs:{direction:"vertical"}}),t("el-popover",{attrs:{placement:"top",trigger:"hover"}},[t("ul",{staticClass:"moreInfo"},[e._l(e.more,(function(a){return[t("li",[e._v(e._s(a))])]}))],2),t("i",{staticClass:"el-icon-arrow-down",attrs:{slot:"reference"},slot:"reference"})])]:e._e()],2)])],2)},i=[],s=a("ade3"),r=(a("7db0"),a("14d9"),a("e9f5"),a("f665"),a("7d54"),a("d3b7"),a("159b"),{name:"Logistics",props:{value:{required:!0,type:Object},placeholder:{default:"请输入物流单号"},more:{type:Array,default:function(){return[]}}},data:function(){return{mold:{key:"auto",name:"自动识别"},lists:[],number:""}},created:function(){this.init(),this.handle()},computed:{store:function(){return this.$store.state}},watch:{value:{handler:function(e){this.$lib.comparison(e,Object(s["a"])(Object(s["a"])({key:this.mold.key},"key",this.mold.name),"number",this.number))||this.handle()},deep:!0}},methods:{init:function(){var e=this;this.store.sys.logistics.forEach((function(t){t.enable&&e.lists.push(t)}))},handle:function(){var e=Object.assign({},this.value);this.number=e.number,this.mold.key=e.key,this.mold.name=e.name},command:function(e){var t=this.lists.find((function(t){return t.key==e}));this.mold.key=t.key,this.mold.name=t.name,this.$emit("input",{key:t.key,name:t.name,number:this.number})},inputChange:function(e){this.$emit("input",{key:this.mold.key,name:this.mold.name,number:e})},openLink:function(){if(this.$lib.validate("empty",this.number))this.$message({type:"warning",message:"物流单号不可为空!"});else{var e={nu:this.number};"auto"==this.mold.key||(e.com=this.mold.key),window.open("https://www.kuaidi100.com/chaxun?"+this.$lib.objToParm(e))}}}}),o=r,l=(a("6763"),a("2877")),c=Object(l["a"])(o,n,i,!1,null,"4b02a31f",null);t["a"]=c.exports},bca3:function(e,t,a){"use strict";a("ed7b")},c135:function(e,t,a){},c548:function(e,t,a){"use strict";a("533f")},c661:function(e,t,a){"use strict";a("038e")},d297:function(e,t,a){},d683:function(e,t,a){"use strict";a("d297")},ddf5:function(e,t,a){"use strict";a("4de4"),a("d81d"),a("b0c0"),a("e9f5"),a("ab43"),a("d3b7");var n=function(){var e=this,t=e._self._c;return t("el-popover",{ref:"popover",staticClass:"nodeIet",attrs:{placement:"top-start",width:"420",trigger:"click",readonly:""},on:{show:e.check}},[t("el-table",{staticClass:"gridTable",attrs:{data:e.table,size:"mini",border:""}},[t("el-table-column",{attrs:{label:"支出类别",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.row.iet,expression:"scope.row.iet"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a.row,"iet",t.target.multiple?n:n[0])}}},[e._l(e.source,(function(a){return[t("option",{domProps:{value:a.id}},[e._v(e._s(a.name))])]}))],2)]}}])}),t("el-table-column",{attrs:{label:"金额",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.row.money,expression:"scope.row.money"}],attrs:{type:"text",placeholder:"金额"},domProps:{value:a.row.money},on:{input:[function(t){t.target.composing||e.$set(a.row,"money",t.target.value)},e.change]}})]}}])}),t("el-table-column",{attrs:{label:"备注",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.row.data,expression:"scope.row.data"}],attrs:{type:"text",placeholder:"备注"},domProps:{value:a.row.data},on:{input:[function(t){t.target.composing||e.$set(a.row,"data",t.target.value)},e.change]}})]}}])}),t("el-table-column",{attrs:{align:"center",width:"80px"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("span",[e._v("操作")]),e._v(" "),t("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addIet}})]}},{key:"default",fn:function(a){return[t("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.delIet(a.$index)}}})]}}])})],1),t("el-input",{attrs:{slot:"reference",disabled:!0,"suffix-icon":"el-icon-tickets"},slot:"reference",model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)},i=[],s=a("b85c"),r=(a("99af"),a("14d9"),a("a434"),{name:"NodIet",props:{value:{required:!0,type:Array},type:{required:!0}},data:function(){return{text:0,table:[],source:[]}},created:function(){this.table=[].concat(this.value),this.source=this.store.iet[this.type]},computed:{store:function(){return this.$store.state}},watch:{value:{handler:function(e){this.$lib.comparison(e,this.table)||(this.table=[].concat(e),this.change())},deep:!0}},methods:{check:function(){0==this.source.length&&(this.$refs["popover"].showPopper=!1,this.$message({type:"warning",message:"未设置收支类别"}))},addIet:function(){this.table.push({iet:this.source[0].id,money:"",data:""}),this.change()},delIet:function(e){this.table.splice(e,1),this.change()},change:function(){var e,t=this.$calc.chain(0),a=Object(s["a"])(this.table);try{for(a.s();!(e=a.n()).done;){var n=e.value;this.$lib.synValidate("numerical",n.money)&&t.add(n.money)}}catch(i){a.e(i)}finally{a.f()}this.text=t.done(),this.$emit("input",this.table),this.$emit("change",this.text)}}}),o=r,l=(a("bca3"),a("2877")),c=Object(l["a"])(o,n,i,!1,null,"a2ed4260",null);t["a"]=c.exports},dfaa:function(e,t,a){"use strict";a("4a41")},e2c6:function(e,t,a){"use strict";a("8498")},ea31:function(e,t,a){},ed7b:function(e,t,a){},fc0a:function(e,t,a){"use strict";a("b0c0");var n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"storeroom"},[t("div",{staticClass:"title"},[t("span",[e._v(e._s(e.title)+" ")]),t("el-popover",{ref:"popover",attrs:{"popper-class":"agGridSelect"}},[t("i",{staticClass:"el-icon-sort",attrs:{slot:"reference"},slot:"reference"}),t("ul",{ref:"list",staticClass:"list"},[e._l(e.list,(function(a,n){return[t("li",{on:{click:function(t){return e.choice(a)}}},[e._v(e._s(a.name))])]}))],2)])],1)])},i=[],s=a("2b0e"),r=s["default"].extend({name:"Storeroom",data:function(){return{title:"",list:[]}},created:function(){this.title=this.params.dispose.title,this.list=this.store.warehouse},computed:{store:function(){return this.$store.state}},methods:{choice:function(e){var t=this,a=this.params.dispose;this.params.api.forEachNode((function(n){null!=n.data.key&&0==n.data.goodsType&&(n.data[a.key]=e.id,t.$grid.updateGridData(t.params,n.data.uniqid,a.text,e.name))})),this.params.context.runHandleGrid(),this.$refs.popover.showPopper=!1,this.$message({type:"success",message:"批量设置完成!"})}}}),o=r,l=(a("c661"),a("2877")),c=Object(l["a"])(o,n,i,!1,null,"7b3c77ab",null);t["a"]=c.exports}}]);